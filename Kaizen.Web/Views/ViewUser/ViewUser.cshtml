@using Kaizen.Models.ViewUserModel
@{
    Layout = "SidebarLayout";
}
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
<style>
    .viewuserCardBody {
        border: 1px solid #ebeef6;
        box-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
        background-color: white;
        padding: 10px;
    }

    #bd_active {
        background-color: rgb(16, 202, 147);
        color: white;
        font-size: small;
    }

    #bd_inactive {
        background-color: #ffa500;
        color: white;
        font-size: small;
    }

    .trsh {
        background-color: #ff0000;
        width: 30px;
        height: 30px;
        border-radius: 13%;
        display: flex;
        justify-content: center;
        align-items: center;
        color: white;
    }

    .table tbody tr td {
        vertical-align: middle;
        border-color: #d7dae3;
    }

    .table th, .table td {
        border: 1px solid #EEEEEE;
        padding: 5px 10px;
        font-size: 11px;
    }

    table {
        display: table;
        border-collapse: separate;
        box-sizing: border-box;
        text-indent: initial;
        unicode-bidi: isolate;
        border-spacing: 3px;
        border-color: gray;
        border: 2px solid #EEEEEE;
    }

    .page_heading {
        font-size: 13px;
    }
</style>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.css">
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.js"></script>

<div class="container-fluid p-2">
    <h4 class="text-left">View User</h4>
    <div class="custom-line mb-3"></div>
    <form>
        <div class="card p-3 mt-2 mb-2">
            <div class="form-row">
                <div class="form-group col-md-4">
                    <label for="inputName">Name<span class="text-danger">*</span></label>
                    <input type="text" class="form-control txt-width" placeholder="Name">
                </div>
                <div class="form-group col-md-4">
                    <label for="inputEmpID">Emp ID<span class="text-danger">*</span></label>
                    <input type="text" class="form-control txt-width" placeholder="Employee ID">
                </div>
                <div class="form-group col-md-4">
                    <label for="inputEmail">Email<span class="text-danger">*</span></label>
                    <input type="email" class="form-control txt-width" placeholder="Email">
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-md-4">
                    <label for="inputUserType">User Type<span class="text-danger">*</span></label>
                    <select class="form-control txt-width">
                        <option selected>All</option>
                        @foreach (var userType in Model.UserTypeList)
                        {
                            <option value="@userType.UserTypeId">@userType.UserDesc</option>
                        }
                    </select>
                </div>
                <div class="form-group col-md-4">
                    <label for="inputDomain">Domain<span class="text-danger">*</span></label>
                    <select id="inputDomain" class="form-control txt-width">
                        <option selected>All</option>
                        @foreach (var domain in Model.DomainList)
                        {
                            <option value="@domain.DomainID">@domain.DomainDesc</option>
                        }
                    </select>
                </div>
                <div class="form-group col-md-4">
                    <label for="inputDepartment">Department<span class="text-danger">*</span></label>
                    <select id="inputDepartment" class="form-control txt-width">
                        <option selected>All</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-block-custom btn-azure" style="width:345px;margin-left:0px">Filter</button>
            </div>
        </div>
        <div class="custom-line mb-3"></div>
        <div class="card viewuserCardBody p-3" id="grid">
            <div class="loginbox-textbox">
                <div class="row">
                    <div class="form-group">
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-8">
                    <p style="font-weight:bold">Total Employees - #</p>
                </div>
                <div class="col-md-4">
                    <button type="button" class="btn btn-block-custom btn-azure" style="width:100px;">Import Kaizen</button>
                    <button type="submit" class="btn btn-block-custom btn-azure" style="width:100px;">Kaizen Sorted</button>
                </div>
                </div>
            <div class="col-12"><hr></div>
            <div class="table-responsive">
                <table id="example" class="display" style="width:100%">
                    <thead>
                        <tr>
                            <th id="EMPID">EMP ID</th>
                            <th id="NAME">NAME</th>
                            <th id="EMAIL">EMAIL</th>
                            <th id="GENDER">GENDER</th>
                            <th id="TOTALKAIZENPOSTED">TOTAL KAIZEN POSTED</th>
                            <th id="DOMAIN&DEPARTMENT">DOMAIN</th>
                            <th id="DOMAIN&DEPARTMENT">DEPARTMENT</th>
                            <th id="USERTYPE">USER TYPE</th>
                            <th id="IMGAPPROVAL">IMG APPROVAL</th>
                            <th id="STATUS">STATUS</th>
                            <th id="ACTION">ACTION</th>
                        </tr>
                    </thead>
                    <tbody style="text-align:center">
                        @foreach (var User in Model.UsergridList)
                        {
                            <tr>
                                <td>@User.EmpID</td>
                                <td>@User.Name</td>
                                <td>@User.Email</td>
                                <td>@User.Gender</td>
                                <td>0</td>
                                <td>@User.Domain</td>
                                <td>@User.Department</td>
                                <td>@User.UserType</td>
                                <td><input type="checkbox" style="background-color:gray" @(User.ImageApprover == 1 ? "checked" : "") disabled /></td>
                                <td>
                                    @if (@User.Status == 0)
                                        {
                                        <a><span class="btn btn-danger badge-sm">InActive</span></a>

                                        }
                                    @if (@User.Status == 1)
                                        {
                                        <a><span class="tn btn-successr badge-sm bd">Active</span></a>

                                        }
                                </td>
                                <td class="text-center">
                                    <a class="btn btn-primary btn-sm edituser">
                                        <i class="edit fas fa-solid fa-pencil"></i>
                                    </a>
                                    <a class="btn btn-danger btn-sm deleteuser">
                                        <i class="fa-solid fa-trash-can"></i>
                                    </a>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
        <script type="text/javascript">
            $(document).ready(function () {
                $('#example').DataTable();
            });
        </script>
        <script>
            $(document).ready(function () {
                $('#inputDomain').change(function () {
                    var Domain = $('#inputDomain').val().trim();
                    $.ajax({
                        type: 'POST',
                        url: '/ViewUser/FetchDepartment',
                        dataType: "json",
                        data: { DomainName: Domain },
                        success: function (result) {
                            if (result) {
                                var dropdown = $('#inputDepartment');
                                dropdown.empty();
                                dropdown.append($('<option>', {
                                    value: 'all',
                                    text: 'All'
                                }));
                                for (var i = 0; i < result.length; i++) {
                                    $('#inputDepartment').append('<option value="' + result[i].deptId + '">' + result[i].departmentName + '</option>');
                                }
                            }
                            else {
                                swal('Please Select Domain');
                            }
                        },
                        error: function (error) {
                        }
                    });
                });
            });
        </script>
    </form>
</div>

