@{
    Layout = "SidebarLayout";
}
<style>
    .card {
        padding: 15px;
    }

    .card-header {
        font-weight: bold;
    }

    #dHeader {
        font-size: 16px !important;
        margin-top: -10px;
        margin-left: 7px;
    }
</style>
<link href="~/assets/css/custom/dashboard.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<div class="card ml-2 mr-2 bg-light ">
<nav>
       @*  <div class="row page-titles mx-0">
            <div class="card rounded bg-white p-2  mt-2 mb-2">
                <div class="col-lg-12 p-md-0 p-2">

                    <div class="welcome-text ">
                        <label class="text-Azure">DashBoard</label>
                    </div>
                </div>
            </div>
        </div> *@
        <div class="container-fluid rounded bg-white p-2  mt-2 mb-2">
            <div class="col-lg-12 p-md-0 p-2">
                <div class="welcome-text">
                    <label id="dHeader">Masters -->Dashboard</label>
                </div>
            </div>
        </div>
        <nav>
            <div class="nav nav-tabs" id="nav-tab" role="tablist">
                <a class="nav-link" id="nav-home-tab" href="@Url.Action("Dashboardtab1", "Dashboard")" role="tab" aria-controls="nav-home" aria-selected="true">Total Kaizen's Submitted</a>
                <a class="nav-link" id="nav-profile-tab" href="@Url.Action("Dashboardtab2", "Dashboard")" role="tab" aria-controls="nav-profile" aria-selected="false">Filter by Department, Domain</a>
                <a class="nav-link  active" id="nav-contact-tab" href="@Url.Action("Dashboardtab3", "Dashboard")" role="tab" aria-controls="nav-contact" aria-selected="false">Monthly, Yearly table</a>
                <a class="nav-link" id="nav-contact-tab" href="@Url.Action("Dashboardtab4", "Dashboard")" role="tab" aria-controls="nav-contact" aria-selected="false">Graphs</a>
            </div>
        </nav>
            <div class="container-fuild p-2 bg-light" style="width:100%">
                <form>
                    <div class="card p-3 mt-2 mb-2">
                        <div class="row">
                            <div class="form-group col-md-4">
                                <label for="Year">Start-Date<span class="text-danger">*</span></label>
                                <div>
                                <input class="form-control txt-width" id="dtstartdate" type="date" name="name" value="" />
                                </div>
                            </div>
                            <div class="form-group col-md-4">
                                <label for="Year">End-Date<span class="text-danger">*</span></label>
                                <div>
                                <input class="form-control txt-width" id="dtenddate" type="date" name="name" value="" />
                                </div>
                            </div>

                            <span class="form-row p-4 container">
                            <button type="button" class="btn  col-lg-2 m-1 btn-azure " id="btn_filter" value="Filter">Filter</button>
                                <button type="reset" class="btn col-lg-2 m-1 btn-warning value="Reset">Reset</button>

                            </span>
                        </div>
                </form>
            </div>
        <div class="container-fuild bg-white pt-3 mt-5">
            <div class="card-header"> Monthly-Table (Domain,Department)</div>
            <div class="table-responsive">
                <table class="table table-bordered table-cus">
                    <thead>
                        <tr>
                            <th rowspan="2">#</th>
                            <th rowspan="2">Month</th>
                            <th colspan="3" class="bg-azure">Total Kaizen Submitted</th>
                            <th colspan="2">Image Sanitization</th>
                            <th colspan="3" class="bg-warning text-white">Pending Approval</th>
                            <th colspan="3" class="bg-danger text-white">Total Kaizen Rejected</th>
                            <th colspan="3" class="bg-success text-white">Total Kaizen Approved</th>
                        </tr>
                        <tr>
                            <th class="bg-azure">DRI</th>
                            <th class="bg-azure">IE Dept</th>
                            <th class="bg-azure">Finance</th>
                            <th>Pending</th>
                            <th>Rejected</th>
                            <th class="bg-warning text-white">DRI</th>
                            <th class="bg-warning text-white">IE Dept</th>
                            <th class="bg-warning text-white">Finance</th>
                            <th class="bg-danger text-white">DRI</th>
                            <th class="bg-danger text-white">IE Dept</th>
                            <th class="bg-danger text-white">Finance</th>
                            <th class="bg-success text-white">DRI</th>
                            <th class="bg-success text-white">IE Dept</th>
                            <th class="bg-success text-white">Finance</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr id="row-jan">
                            <td>01</td>
                            <td>Jan</td>
                            <td id="jan-submitted-dri" class="submitted-td">0</td>
                            <td id="jan-submitted-ie" class="submitted-td">0</td>
                            <td id="jan-submitted-finance" class="submitted-td">0</td>
                            <td id="jan-image-pending" class="image-sanitization">0</td>
                            <td id="jan-image-rejected" class="image-sanitization">0</td>
                            <td id="jan-pending-dri" class="pending-td">0</td>
                            <td id="jan-pending-ie" class="pending-td">0</td>
                            <td id="jan-pending-finance" class="pending-td">0</td>
                            <td id="jan-rejected-dri" class="rejected-td">0</td>
                            <td id="jan-rejected-ie" class="rejected-td">0</td>
                            <td id="jan-rejected-finance" class="rejected-td">0</td>
                            <td id="jan-approved-dri" class="approved-td">0</td>
                            <td id="jan-approved-ie" class="approved-td">0</td>
                            <td id="jan-approved-finance" class="approved-td">0</td>
                        </tr>
                        <tr id="row-feb">
                            <td>02</td>
                            <td>Feb</td>
                            <td id="feb-submitted-dri" class="submitted-td">0</td>
                            <td id="feb-submitted-ie" class="submitted-td">0</td>
                            <td id="feb-submitted-finance" class="submitted-td">0</td>
                            <td id="feb-image-pending" class="image-sanitization">0</td>
                            <td id="feb-image-rejected" class="image-sanitization">0</td>
                            <td id="feb-pending-dri" class="pending-td">0</td>
                            <td id="feb-pending-ie" class="pending-td">0</td>
                            <td id="feb-pending-finance" class="pending-td">0</td>
                            <td id="feb-rejected-dri" class="rejected-td">0</td>
                            <td id="feb-rejected-ie" class="rejected-td">0</td>
                            <td id="feb-rejected-finance" class="rejected-td">0</td>
                            <td id="feb-approved-dri" class="approved-td">0</td>
                            <td id="feb-approved-ie" class="approved-td">0</td>
                            <td id="feb-approved-finance" class="approved-td">0</td>
                        </tr>
                        <tr id="row-mar">
                            <td>03</td>
                            <td>Mar</td>
                            <td id="mar-submitted-dri" class="submitted-td">0</td>
                            <td id="mar-submitted-ie" class="submitted-td">0</td>
                            <td id="mar-submitted-finance" class="submitted-td">0</td>
                            <td id="mar-image-pending" class="image-sanitization">0</td>
                            <td id="mar-image-rejected" class="image-sanitization">0</td>
                            <td id="mar-pending-dri" class="pending-td">0</td>
                            <td id="mar-pending-ie" class="pending-td">0</td>
                            <td id="mar-pending-finance" class="pending-td">0</td>
                            <td id="mar-rejected-dri" class="rejected-td">0</td>
                            <td id="mar-rejected-ie" class="rejected-td">0</td>
                            <td id="mar-rejected-finance" class="rejected-td">0</td>
                            <td id="mar-approved-dri" class="approved-td">0</td>
                            <td id="mar-approved-ie" class="approved-td">0</td>
                            <td id="mar-approved-finance" class="approved-td">0</td>
                        </tr>
                        <tr id="row-apr">
                            <td>04</td>
                            <td>Apr</td>
                            <td id="apr-submitted-dri" class="submitted-td">0</td>
                            <td id="apr-submitted-ie" class="submitted-td">0</td>
                            <td id="apr-submitted-finance" class="submitted-td">0</td>
                            <td id="apr-image-pending" class="image-sanitization">0</td>
                            <td id="apr-image-rejected" class="image-sanitization">0</td>
                            <td id="apr-pending-dri" class="pending-td">0</td>
                            <td id="apr-pending-ie" class="pending-td">0</td>
                            <td id="apr-pending-finance" class="pending-td">0</td>
                            <td id="apr-rejected-dri" class="rejected-td">0</td>
                            <td id="apr-rejected-ie" class="rejected-td">0</td>
                            <td id="apr-rejected-finance" class="rejected-td">0</td>
                            <td id="apr-approved-dri" class="approved-td">0</td>
                            <td id="apr-approved-ie" class="approved-td">0</td>
                            <td id="apr-approved-finance" class="approved-td">0</td>
                        </tr>
                        <tr id="row-may">
                            <td>05</td>
                            <td>May</td>
                            <td id="may-submitted-dri" class="submitted-td">0</td>
                            <td id="may-submitted-ie" class="submitted-td">0</td>
                            <td id="may-submitted-finance" class="submitted-td">0</td>
                            <td id="may-image-pending" class="image-sanitization">0</td>
                            <td id="may-image-rejected" class="image-sanitization">0</td>
                            <td id="may-pending-dri" class="pending-td">0</td>
                            <td id="may-pending-ie" class="pending-td">0</td>
                            <td id="may-pending-finance" class="pending-td">0</td>
                            <td id="may-rejected-dri" class="rejected-td">0</td>
                            <td id="may-rejected-ie" class="rejected-td">0</td>
                            <td id="may-rejected-finance" class="rejected-td">0</td>
                            <td id="may-approved-dri" class="approved-td">0</td>
                            <td id="may-approved-ie" class="approved-td">0</td>
                            <td id="may-approved-finance" class="approved-td">0</td>
                        </tr>
                        <tr id="row-june">
                            <td>06</td>
                            <td>June</td>
                            <td id="jun-submitted-dri" class="submitted-td">0</td>
                            <td id="jun-submitted-ie" class="submitted-td">0</td>
                            <td id="jun-submitted-finance" class="submitted-td">0</td>
                            <td id="jun-image-pending" class="image-sanitization">0</td>
                            <td id="jun-image-rejected" class="image-sanitization">0</td>
                            <td id="jun-pending-dri" class="pending-td">0</td>
                            <td id="jun-pending-ie" class="pending-td">0</td>
                            <td id="jun-pending-finance" class="pending-td">0</td>
                            <td id="jun-rejected-dri" class="rejected-td">0</td>
                            <td id="jun-rejected-ie" class="rejected-td">0</td>
                            <td id="jun-rejected-finance" class="rejected-td">0</td>
                            <td id="jun-approved-dri" class="approved-td">0</td>
                            <td id="jun-approved-ie" class="approved-td">0</td>
                            <td id="jun-approved-finance" class="approved-td">0</td>
                        </tr>
                        <tr id="row-july">
                            <td>07</td>
                            <td>July</td>
                            <td id="jul-submitted-dri" class="submitted-td">0</td>
                            <td id="jul-submitted-ie" class="submitted-td">0</td>
                            <td id="jul-submitted-finance" class="submitted-td">0</td>
                            <td id="jul-image-pending" class="image-sanitization">0</td>
                            <td id="jul-image-rejected" class="image-sanitization">0</td>
                            <td id="jul-pending-dri" class="pending-td">0</td>
                            <td id="jul-pending-ie" class="pending-td">0</td>
                            <td id="jul-pending-finance" class="pending-td">0</td>
                            <td id="jul-rejected-dri" class="rejected-td">0</td>
                            <td id="jul-rejected-ie" class="rejected-td">0</td>
                            <td id="jul-rejected-finance" class="rejected-td">0</td>
                            <td id="jul-approved-dri" class="approved-td">0</td>
                            <td id="jul-approved-ie" class="approved-td">0</td>
                            <td id="jul-approved-finance" class="approved-td">0</td>
                        </tr>
                        <tr id="row-aug">
                            <td>08</td>
                            <td>Aug</td>
                            <td id="aug-submitted-dri" class="submitted-td">0</td>
                            <td id="aug-submitted-ie" class="submitted-td">0</td>
                            <td id="aug-submitted-finance" class="submitted-td">0</td>
                            <td id="aug-image-pending" class="image-sanitization">0</td>
                            <td id="aug-image-rejected" class="image-sanitization">0</td>
                            <td id="aug-pending-dri" class="pending-td">0</td>
                            <td id="aug-pending-ie" class="pending-td">0</td>
                            <td id="aug-pending-finance" class="pending-td">0</td>
                            <td id="aug-rejected-dri" class="rejected-td">0</td>
                            <td id="aug-rejected-ie" class="rejected-td">0</td>
                            <td id="aug-rejected-finance" class="rejected-td">0</td>
                            <td id="aug-approved-dri" class="approved-td">0</td>
                            <td id="aug-approved-ie" class="approved-td">0</td>
                            <td id="aug-approved-finance" class="approved-td">0</td>
                        </tr>
                        <tr id="row-sep">
                            <td>09</td>
                            <td>Sep</td>
                            <td id="sep-submitted-dri" class="submitted-td">0</td>
                            <td id="sep-submitted-ie" class="submitted-td">0</td>
                            <td id="sep-submitted-finance" class="submitted-td">0</td>
                            <td id="sep-image-pending" class="image-sanitization">0</td>
                            <td id="sep-image-rejected" class="image-sanitization">0</td>
                            <td id="sep-pending-dri" class="pending-td">0</td>
                            <td id="sep-pending-ie" class="pending-td">0</td>
                            <td id="sep-pending-finance" class="pending-td">0</td>
                            <td id="sep-rejected-dri" class="rejected-td">0</td>
                            <td id="sep-rejected-ie" class="rejected-td">0</td>
                            <td id="sep-rejected-finance" class="rejected-td">0</td>
                            <td id="sep-approved-dri" class="approved-td">0</td>
                            <td id="sep-approved-ie" class="approved-td">0</td>
                            <td id="sep-approved-finance" class="approved-td">0</td>
                        </tr>
                        <tr id="row-oct">
                            <td>10</td>
                            <td>Oct</td>
                            <td id="oct-submitted-dri" class="submitted-td">0</td>
                            <td id="oct-submitted-ie" class="submitted-td">0</td>
                            <td id="oct-submitted-finance" class="submitted-td">0</td>
                            <td id="oct-image-pending" class="image-sanitization">0</td>
                            <td id="oct-image-rejected" class="image-sanitization">0</td>
                            <td id="oct-pending-dri" class="pending-td">0</td>
                            <td id="oct-pending-ie" class="pending-td">0</td>
                            <td id="oct-pending-finance" class="pending-td">0</td>
                            <td id="oct-rejected-dri" class="rejected-td">0</td>
                            <td id="oct-rejected-ie" class="rejected-td">0</td>
                            <td id="oct-rejected-finance" class="rejected-td">0</td>
                            <td id="oct-approved-dri" class="approved-td">0</td>
                            <td id="oct-approved-ie" class="approved-td">0</td>
                            <td id="oct-approved-finance" class="approved-td">0</td>
                        </tr>
                        <tr id="row-nov">
                            <td>11</td>
                            <td>Nov</td>
                            <td id="nov-submitted-dri" class="submitted-td">0</td>
                            <td id="nov-submitted-ie" class="submitted-td">0</td>
                            <td id="nov-submitted-finance" class="submitted-td">0</td>
                            <td id="nov-image-pending" class="image-sanitization">0</td>
                            <td id="nov-image-rejected" class="image-sanitization">0</td>
                            <td id="nov-pending-dri" class="pending-td">0</td>
                            <td id="nov-pending-ie" class="pending-td">0</td>
                            <td id="nov-pending-finance" class="pending-td">0</td>
                            <td id="nov-rejected-dri" class="rejected-td">0</td>
                            <td id="nov-rejected-ie" class="rejected-td">0</td>
                            <td id="nov-rejected-finance" class="rejected-td">0</td>
                            <td id="nov-approved-dri" class="approved-td">0</td>
                            <td id="nov-approved-ie" class="approved-td">0</td>
                            <td id="nov-approved-finance" class="approved-td">0</td>
                        </tr>
                        <tr id="row-dec">
                            <td>12</td>
                            <td>Dec</td>
                            <td id="dec-submitted-dri" class="submitted-td">0</td>
                            <td id="dec-submitted-ie" class="submitted-td">0</td>
                            <td id="dec-submitted-finance" class="submitted-td">0</td>
                            <td id="dec-image-pending" class="image-sanitization">0</td>
                            <td id="dec-image-rejected" class="image-sanitization">0</td>
                            <td id="dec-pending-dri" class="pending-td">0</td>
                            <td id="dec-pending-ie" class="pending-td">0</td>
                            <td id="dec-pending-finance" class="pending-td">0</td>
                            <td id="dec-rejected-dri" class="rejected-td">0</td>
                            <td id="dec-rejected-ie" class="rejected-td">0</td>
                            <td id="dec-rejected-finance" class="rejected-td">0</td>
                            <td id="dec-approved-dri" class="approved-td">0</td>
                            <td id="dec-approved-ie" class="approved-td">0</td>
                            <td id="dec-approved-finance" class="approved-td">0</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

            @* table -2 *@
      
            <div class="container-fuild mt-5 bg-white pt-3">
            <div class="  card-header">Monthy table</div>
                <div class="table-responsive">
                <table class="table table-bordered custom-table">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Month</th>
                            <th>Total Kaizen Submitted</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td>
                            <td>16th-Dec-<span id="startyear">2023</span> to 15th-Jan-<span class="year">2024</span></td>
                            <td id="val-dec-jan">0</td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>16th-Jan-<span class="year">2024</span> to 15th-Feb-<span class="year">2024</span></td>
                            <td id="val-jan-feb">0</td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>16th-Feb-<span class="year">2024</span> to 15th-Mar-<span class="year">2024</span></td>
                            <td id="val-feb-mar">0</td>
                        </tr>
                        <tr>
                            <td>4</td>
                            <td>16th-Mar-<span class="year">2024</span> to 15th-Apr-<span class="year">2024</span></td>
                            <td id="val-mar-apr">0</td>
                        </tr>
                        <tr>
                            <td>5</td>
                            <td>16th-Apr-<span class="year">2024</span> to 15th-May-<span class="year">2024</span></td>
                            <td id="val-apr-may">0</td>
                        </tr>
                        <tr>
                            <td>6</td>
                            <td>16th-May-<span class="year">2024</span> to 15th-Jun-<span class="year">2024</span></td>
                            <td id="val-may-jun">0</td>
                        </tr>
                        <tr>
                            <td>7</td>
                            <td>16th-Jun-<span class="year">2024</span> to 15th-Jul-<span class="year">2024</span></td>
                            <td id="val-jun-jul">0</td>
                        </tr>
                        <tr>
                            <td>8</td>
                            <td>16th-Jul-<span class="year">2024</span> to 15th-Aug-<span class="year">2024</span></td>
                            <td id="val-jul-aug">0</td>
                        </tr>
                        <tr>
                            <td>9</td>
                            <td>16th-Aug-<span class="year">2024</span> to 15th-Sep-<span class="year">2024</span></td>
                            <td id="val-aug-sep">0</td>
                        </tr>
                        <tr>
                            <td>10</td>
                            <td>16th-Sep-<span class="year">2024</span> to 15th-Oct-<span class="year">2024</span></td>
                            <td id="val-sep-oct">0</td>
                        </tr>
                        <tr>
                            <td>11</td>
                            <td>16th-Oct-<span class="year">2024</span> to 15th-Nov-<span class="year">2024</span></td>
                            <td id="val-oct-nov">0</td>
                        </tr>
                        <tr>
                            <td>12</td>
                            <td>16th-Nov-<span class="year">2024</span> to 15th-Dec-<span class="year">2024</span></td>
                            <td id="val-nov-dec">0</td>
                        </tr>
                        <tr>
                            <td>13</td>
                            <td>16th-Dec-<span class="year">2024</span> to 15th-Jan-<span id="endyear">2025</span></td>
                            <td id="val-dec-jan-next">0</td>
                        </tr>
                    </tbody>
                </table>

                </div>
            </div>
        </div>
        </div>
    </nav>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script>
    $(document).ready(function () {
        debugger;
                   
        $('#btn_filter').click(function () {
            debugger;
            var StartDate = $('#dtstartdate').val();
            var EndDate = $('#dtenddate').val();
            $.ajax({
                url: '@Url.Action("ViewFilterKaizen", "Dashboard")',
                type: 'GET',
                data: {
                    StartDate: StartDate,
                    EndDate: EndDate
                },
                beforeSend: function () {
                    $('#loader-wrapper').show();
                },
                success: function (result) {
                    debugger;
                    var data = result.monthCountKaizenList;
                    const statusDetails = {
                        Submitted:1,
                        ImageApproved: 2,
                        ImageRejected: 3,
                        DRIApproved: 4,
                        DRIRejected: 5,
                        IEApproved: 6,
                        IERejected: 7,
                        FinanceApproved: 8,
                        FinanceRejected: 9,
                        Pending: 10,
                        DRIPending: 11,
                        IEPending: 12,
                        FinancePending: 13
                    };
                    for (let i = 0; i < result.customMonthTotalKaizenList.length; i++) {
                        let item = result.customMonthTotalKaizenList[i];
                          var monthYear = item.monthbasedTotal.split('-');
                         var month1 = monthYear[1].toLowerCase().substr(0, 3);                       
                        var month2 = monthYear[3].toLowerCase().substr(0, 3);
                        var year = monthYear[2].substr(0, 4);
                        var yearNumber = parseInt(year, 10);
                        var startyear=yearNumber-1;
                        var EndYear = yearNumber + 1;
                        $('.year').text(year);
                        $('#startyear').text(startyear);
                        $('#endyear').text(EndYear);
                        $('#val-' + month1 + '-' + month2).text(result.customMonthTotalKaizenList[i].totalKaizens || 0);
                       
                    }
                     for (let i = 0; i < result.monthTotalKaizenList.length; i++) {
                        let item = result.monthTotalKaizenList[i];
                        var monthYear = item.monthbasedTotal.split('-');
                        var month = monthYear[0].toLowerCase().substr(0, 3);
                        var year = monthYear[1];
                        $('#' + month + '-submitted-ie').text(result.monthTotalKaizenList[i].ieTotal || 0);
                        $('#' + month + '-submitted-dri').text(result.monthTotalKaizenList[i].driTotal || 0);
                        $('#' + month + '-submitted-finance').text(result.monthTotalKaizenList[i].financeTotal || 0);                      
                      }
                    for (let i = 0; i < result.monthCountKaizenList.length; i++) {
                        let item = result.monthCountKaizenList[i];
                        var monthYear = item.monthbased.split('-');
                        var month = monthYear[0].toLowerCase().substr(0, 3);
                        var year = monthYear[1];
                        switch (item.approvalStatus) {
                            case statusDetails.DRIApproved:
                                $('#' + month + '-approved-dri').text(item.approvalCount || 0);
                                break;
                            case statusDetails.DRIRejected:
                                $('#' + month + '-rejected-dri').text(item.approvalCount || 0);
                                break;
                            case statusDetails.IEApproved:
                                $('#' + month + '-approved-ie').text(item.approvalCount || 0);
                                break;
                            case statusDetails.IERejected:
                                $('#' + month + '-rejected-ie').text(item.approvalCount || 0);
                                break;
                            case statusDetails.FinanceApproved:
                                $('#' + month + '-approved-finance').text(item.approvalCount || 0);
                                break;
                            case statusDetails.FinanceRejected:
                                $('#' + month + '-rejected-finance').text(item.approvalCount || 0);
                                break;
                            case statusDetails.DRIPending:
                                $('#' + month + '-pending-dri').text(item.approvalCount || 0);
                                break;
                            case statusDetails.IEPending:
                                $('#' + month + '-pending-ie').text(item.approvalCount || 0);
                                break;
                            case statusDetails.FinancePending:
                                $('#' + month + '-pending-finance').text(item.approvalCount || 0);
                                break;
                            case statusDetails.Submitted:
                                $('#' + month + '-image-pending').text(item.approvalCount || 0);
                                break;
                            case statusDetails.ImageRejected:
                                $('#' + month + '-image-rejected').text(item.approvalCount || 0);
                                break;
                        }

                    }
 
                },
                error: function (error) {
                }
            });
        });
    });



</script>