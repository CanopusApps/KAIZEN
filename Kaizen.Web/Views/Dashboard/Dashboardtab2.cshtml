@model Kaizen.Models.DashboardModel.DashboardModel;
@{
    Layout = "SidebarLayout";
}
<link href="~/assets/css/custom/dashboard.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
    .card {
        padding: 15px;
    }
    .progress-bar {
            width: 80%;
        }

    .card-header {
        font-weight: bold;
    }

    canvas {
        width: 100% !important;
        height: auto !important;
    }

    #dHeader {
        font-size: 16px !important;
        margin-top: -10px;
        margin-left: 7px;
    }
</style>
<div class="card ml-2 mr-2 bg-light ">
<nav>
        <div class="container-fluid rounded bg-white p-2  mt-2 mb-2">
            <div class="col-lg-12 p-md-0 p-2">
                <div class="welcome-text">
                    <label id="dHeader">Masters -->Dashboard</label>
                </div>
            </div>
        </div>
    <nav>
        <div class="nav nav-tabs" id="nav-tab" role="tablist">
                <a class="nav-link text-Azure " id="nav-home-tab" href="@Url.Action("Dashboardtab1", "Dashboard")" role="tab" aria-controls="nav-home" aria-selected="false">Total Kaizen's Submitted</a>
                <a class="nav-link text-Azure active" id="nav-profile-tab" href="@Url.Action("Dashboardtab2", "Dashboard")" role="tab" aria-controls="nav-profile" aria-selected="true">Filter by Department, Domain</a>
                <a class="nav-link text-Azure" id="nav-contact-tab" href="@Url.Action("Dashboardtab3", "Dashboard")" role="tab" aria-controls="nav-contact" aria-selected="false">Monthly, Yearly table</a>
            </div>
    </nav>

      <div class="container-fluid border rounded p-2" style="width:100%">
					
                    <form>
                        <div class="card p-3 mt-2 mb-2">                         
                            <div class="row mb-2">
                                <div class="form-group col-lg-4">
                            <label for="inputDomain">Domain<span class="text-danger">*</span></label>
                            <select id="inputDomain" class="form-control txt-width" name="Domain">
                                <option value="0" selected>All</option> 
                                @if (Model.DomainList != null)
                                {
                                    @foreach (var domain in Model.DomainList)
                                    {
                                        <option value="@domain.Id">@domain.DomainName</option>
                                    }
                                }
                            </select>
                                </div>
                                <div class="form-group col-lg-4">
                                    <label for="inputDepartment">Department<span class="text-danger">*</span></label>
                                    <select id="inputDepartment" class="form-control txt-width" name="Department">
                                    <option selected>All</option>
                                    </select>
                                   </div>
								 <div class="form-group col-lg-2">
                                    <label for="inputUserType">Start-Date<span class="text-danger">*</span></label>
                            <div>
                                <input class="form-control txt-width" type="date" name="name" value="" />
                            </div>

                        </div>
								 <div class="form-group col-lg-2">
                                    <label for="inputUserType">End-Date<span class="text-danger">*</span></label>
                            <div>
                                <input class="form-control txt-width" type="date" name="name" value="" />
                            </div>

                        </div>
                                <span class="form-row p-4 container">
                                   <button type="submit" class="btn  col-lg-2 m-1 btn-azure ">Filter</button>
                                  <button type="reset" class="btn col-lg-2 m-1 btn-warning" id="configreset" value="Reset">Reset</button>
     
                              </span>
                            </div>
                            </form>
                        </div>



        <div class="card mb-2 bg-white p-5 ">
            <div class="  card-header"> Submitted Kaizen Forms </div>
            <div class="row" style="width:100%">
                <div class="col-xl-4 col-lg-4 col-sm-6 col-12 mb-2">
                    <div class="card overflow-hidden">
                        <div class="card-body">
                            <div class="text-center">
                                <label class="card-title">DRI</label>
                                <h3>0</h3>
                                <div class="progress mb-2">
                                    <div class="progress-bar progress-animated bg-default" style="width: 80%"></div>
                                </div>
                            </div>
                        </div>
                        <div class="card-footer pt-0 pb-0 text-center">
                            <div class="row">
                                <div class="col-4 pt-3 pb-3 border-right">
                                    <h3 class="mb-1">0</h3><span>Pending</span>
                                </div>
                                <div class="col-4 pt-3 pb-3 border-right">
                                    <h3 class="mb-1">0</h3><span>Approved</span>
                                </div>
                                <div class="col-4 pt-3 pb-3">
                                    <h3 class="mb-1">0</h3><span>Rejected</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-xl-4 col-lg-4 col-sm-6 col-12 mb-2">
                    <div class="card overflow-hidden">
                        <div class="card-body">
                            <div class="text-center">
                                <label class="card-title">IE DEPT</label>
                                <h3>0</h3>
                                <div class="progress mb-2">
                                    <div class="progress-bar progress-animated bg-default" style="width: 80%"></div>
                                </div>
                            </div>
                        </div>
                        <div class="card-footer pt-0 pb-0 text-center">
                            <div class="row">
                                <div class="col-4 pt-3 pb-3 border-right">
                                    <h3 class="mb-1">0</h3><span>Pending</span>
                                </div>
                                <div class="col-4 pt-3 pb-3 border-right">
                                    <h3 class="mb-1">0</h3><span>Approved</span>
                                </div>
                                <div class="col-4 pt-3 pb-3">
                                    <h3 class="mb-1">0</h3><span>Rejected</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-xl-4 col-lg-4 col-sm-6 col-12 mb-2">
                    <div class="card overflow-hidden">
                        <div class="card-body">
                            <div class="text-center">
                                <label class="card-title">Finance</label>
                                <h3>0</h3>
                                <div class="progress mb-2">
                                    <div class="progress-bar progress-animated bg-default" style="width: 80%"></div>
                                </div>
                            </div>
                        </div>
                        <div class="card-footer pt-0 pb-0 text-center">
                            <div class="row">
                                <div class="col-4 pt-3 pb-3 border-right">
                                    <h3 class="mb-1">0</h3><span>Pending</span>
                                </div>
                                <div class="col-4 pt-3 pb-3 border-right">
                                    <h3 class="mb-1">0</h3><span>Approved</span>
                                </div>
                                <div class="col-4 pt-3 pb-3">
                                    <h3 class="mb-1">0</h3><span>Rejected</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
       

        <div class="row mb-2" style="width:100%">
            <div class="col-xl-4 col-lg-4 col-sm-6 col-12 mb-2">
                <div class="card overflow-hidden">
                    <div class="card-body">
                        <div class="text-center">
                            <label class="card-title">Total Kaizen Submitted</label>
                            <h3>0</h3>
                            <div class="progress mb-2">
                                <div class="progress-bar progress-animated bg-default" style="width: 80%"></div>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer pt-0 pb-0 text-center">
                        <div class="row">
                            <div class="col-4 pt-3 pb-3 border-right">
                                <h3 class="mb-1">0</h3><span>Pending</span>
                            </div>
                            <div class="col-4 pt-3 pb-3 border-right">
                                <h3 class="mb-1">0</h3><span>Approved</span>
                            </div>
                            <div class="col-4 pt-3 pb-3">
                                <h3 class="mb-1">0</h3><span>Rejected</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xl-4 col-lg-4 col-sm-6 col-12 mb-2">
                <div class="card overflow-hidden">
                    <div class="card-body">
                        <div class="text-center">
                            <label class="card-title">Approved Kaizen</label>
                            <h3>0</h3>
                            <div class="progress mb-2">
                                <div class="progress-bar progress-animated bg-success" style="width: 80%"></div>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer pt-0 pb-0 text-center">
                        <div class="row">
                            <div class="col-4 pt-3 pb-3 border-right">
                                <h3 class="mb-1">0</h3><span>Pending</span>
                            </div>
                            <div class="col-4 pt-3 pb-3 border-right">
                                <h3 class="mb-1">0</h3><span>Approved</span>
                            </div>
                            <div class="col-4 pt-3 pb-3">
                                <h3 class="mb-1">0</h3><span>Rejected</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xl-4 col-lg-4 col-sm-6 col-12 mb-2">
                <div class="card overflow-hidden">
                    <div class="card-body">
                        <div class="text-center">
                            <label class="card-title">Rejected Kaizen</label>
                            <h3>0</h3>
                            <div class="progress mb-2">
                                <div class="progress-bar progress-animated bg-danger" style="width: 80%"></div>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer pt-0 pb-0 text-center">
                        <div class="row">
                            <div class="col-4 pt-3 pb-3 border-right">
                                <h3 class="mb-1">0</h3><span>Pending</span>
                            </div>
                            <div class="col-4 pt-3 pb-3 border-right">
                                <h3 class="mb-1">0</h3><span>Approved</span>
                            </div>
                            <div class="col-4 pt-3 pb-3">
                                <h3 class="mb-1">0</h3><span>Rejected</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row mb-2" style="width:100%">
            <div class="col-xl-4 col-lg-4 col-sm-6 col-12 mb-2">
                <div class="card overflow-hidden">
                    <div class="card-body">
                        <div class="text-center">
                            <label class="card-title">Pending Kaizen</label>
                            <h3>0</h3>
                            <div class="progress mb-2">
                                <div class="progress-bar progress-animated bg-warning" style="width: 80%"></div>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer pt-0 pb-0 text-center">
                        <div class="row">
                            <div class="col-4 pt-3 pb-3 border-right">
                                <h3 class="mb-1">0</h3><span>Pending</span>
                            </div>
                            <div class="col-4 pt-3 pb-3 border-right">
                                <h3 class="mb-1">0</h3><span>Approved</span>
                            </div>
                            <div class="col-4 pt-3 pb-3">
                                <h3 class="mb-1">0</h3><span>Rejected</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xl-4 col-lg-4 col-sm-6 col-12 mb-2">
                <div class="card overflow-hidden">
                    <div class="card-body">
                        <div class="text-center">
                            <label class="card-title">Image Sanitation</label>
                            <h3>0</h3>
                            <div class="progress mb-2">
                                <div class="progress-bar progress-animated bg-default" style="width: 80%"></div>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer pt-0 pb-0 text-center">
                        <div class="row">
                            <div class="col-6 pt-3 pb-3 border-right">
                                <h3 class="mb-1">0</h3><span>Approved</span>
                            </div>
                            <div class="col-6 pt-3 pb-3">
                                <h3 class="mb-1">0</h3><span>Rejected</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>



      
            <div class="card bg-white border chart-container mt-4 mb-4 ml-2 mr-2">
                <div class="  card-header"> Submitted Kaizen Chart </div>
                <div class="card-body">                 
                    <div class="d-flex justify-content-center">
                        <div class="col-lg-8 col-md-10 col-sm-12">
                            
                            
                            <canvas id="myBarChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
      
            </div>
    </nav>
</div>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script>
    // JavaScript for rendering the bar chart
        $(document).ready(function () {
            var ctx = document.getElementById('myBarChart').getContext('2d');
            var myBarChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],
                    datasets: [
                        {
                            label: 'Total',
                            data: [29, 25, 30, 22, 35, 27, 32, 28, 31, 24, 26, 30],
                            backgroundColor: 'rgba(153, 102, 255, 0.2)',
                            borderColor: 'rgba(153, 102, 255, 1)',
                            borderWidth: 1
                        },
                        {
                            label: 'Approved',
                            data: [12, 10, 14, 9, 16, 11, 15, 13, 14, 10, 12, 14],
                            backgroundColor: 'rgba(54, 162, 235, 0.2)',
                            borderColor: 'rgba(54, 162, 235, 1)',
                            borderWidth: 1
                        },
                        {
                            label: 'Rejected',
                            data: [19, 17, 21, 14, 23, 19, 22, 20, 21, 16, 18, 22],
                            backgroundColor: 'rgba(255, 99, 132, 0.2)',
                            borderColor: 'rgba(255, 99, 132, 1)',
                            borderWidth: 1
                        },
                        {
                            label: 'Pending',
                            data: [3, 2, 4, 1, 5, 2, 3, 2, 4, 2, 3, 4],
                            backgroundColor: 'rgba(255, 206, 86, 0.2)',
                            borderColor: 'rgba(255, 206, 86, 1)',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
       
       $('#inputDomain').change(function () {
          var Domain = $('#inputDomain').val().trim();
          $.ajax({
             type: 'POST',
             url: '/Admin/FetchDepartment',
             dataType: "json",
             data: { DomainID: Domain },
             success: function (result) {
                if (result) {
                    var dropdown = $('#inputDepartment');
                    dropdown.empty();
                    dropdown.append($('<option>', {
                        value: 'all',
                        text: 'Select Department'
                    }));
                    for (var i = 0; i < result.length; i++) {
                        $('#inputDepartment').append('<option value="' + result[i].deptId + '">' + result[i].departmentName + '</option>');
                    }
                } else {
                    Swal.fire('Please Select Domain');
                }
            },
            error: function (error) {
            }
        });
    });
   });
</script>