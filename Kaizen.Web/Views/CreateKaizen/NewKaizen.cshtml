@using Kaizen.Models.AdminModel
@using Kaizen.Models.NewKaizen;
@inject IHttpContextAccessor Accessor
@using Newtonsoft.Json;

@{
    var managerListJson = Accessor.HttpContext.Session.GetString("ManagerList");
    List<ManagerModel> managerList = new List<ManagerModel>();

    if (!string.IsNullOrEmpty(managerListJson))
    {
        managerList = JsonConvert.DeserializeObject<List<ManagerModel>>(managerListJson);
    }
}
@model NewKaizenModel;
@{
    Layout = "SidebarLayout";
}
<style>
    .approved {
        color: green;
    }

    .rejected {
        color: red;
    }

    .pending {
        color: orange; 
    }

    .btn-danger {
        color: #fff!important;
        background-color: #dc3545!important;
        border-color: #dc3545!important;
    }
    .btn-azure{
        color: #fff !important;
    }

    #approvers {
        display: none;
    }

    .input-width {
        width: 100%;
    }

    table {
        width: 100%;
        border-collapse: collapse;
    }

    th, td {
        
        border: 1px solid #ddd;
    }

    th {
        background-color: #f4f4f4;
    }

    .col-lg-4 {
        width: 25%;
    }

    .input-width {
        width: 100%;
    }

    .btn-success {
        pointer-events: none;
        cursor: not-allowed!important;
    }
</style>
<link href="~/assets/css/custom/newkaizen.css" rel="stylesheet" />
<div class="content-body body mb-2">
    <div class="container-fluid mt-5">
        <!-- Page Title -->
        <div class="row page-titles mx-0 mt-5">
            <div class="col-sm-12 p-md-0">
                <div class="welcome-text">
                    <h4>Create Kaizen<button class="btn btn-azure float-right" type="button">Sample Kaizen Form</button></h4>
                    <p class="responsemessage"></p>
                </div>
            </div>
        </div>
        <!-- END Page Title -->
        <!-- Accordion Section -->

        <div class="accordion-bral">

            <!-- Accordion Item 1 -->

            <input class="ac-input" id="ac-1" name="accordion-1" type="checkbox" checked />

            <label class="ac-label" for="ac-1"> Create Kaizen Details <i></i></label>

            <div class="article ac-content">

                <div class="card-body">
                    @* <h3 class="card-title">Post My Idea</h3> *@
                    <hr><br>
                    <div class="basic-form">
                        <div class="col-lg-12">

                            <div class="row">
                                <!-- 1th box -->
                                <div class="col-lg-3">
                                    <div class="carddashed">

                                        <div class="card-body">

                                            <div class="right-box-padding">

                                                <div class="read-content">
                                                    <div class="row justify-content-center">

                                                        <div class="card-body text-center">

                                                            <img src="~/assets/img/tatalogo.png" class="kaizenlogo" alt="TEPL KAIZEN IDEA Logo">

                                                            <br><b>TEPL KAIZEN IDEA</b>

                                                        </div>

                                                    </div>
                                                </div>

                                            </div>

                                        </div>

                                    </div>

                                </div>
                                <!-- 2th box -->
                                <div class="col-lg-4">
                                    <div class="carddashed">
                                        <div class="card-body">

                                            <div class="right-box-padding">
                                                <div class="read-content">

                                                    <div class="card-body">

                                                        <div class="activity-group" id="checkboxform">
                                                            <label>ACTIVITY<span class="mandatory">*</span></label>
                                                            <label data-toggle="popover" data-trigger="hover" data-placement="top" data-html="true" data-content='<img src="/assets/img/tooltip-imgs/activity.png" height="40" />' title="ACTIVITY [Example]">
                                                                <input type="checkbox" class="hideradio" id="idMURA" value="MURA">MURA
                                                            </label>

                                                            <label data-toggle="popover" data-trigger="hover" data-placement="top" data-html="true" data-content='<img src="/assets/img/tooltip-imgs/activity.png" height="40" />' title="ACTIVITY [Example]">
                                                                <input type="checkbox" class="hideradio" id="idMURI" value="MURI"> MURI
                                                            </label>

                                                            <label data-toggle="popover" data-trigger="hover" data-placement="top" data-html="true" data-content='<img src="/assets/img/tooltip-imgs/activity.png" height="40"; />' title="ACTIVITY [Example]">
                                                                <input type="checkbox" class="hideradio" id="idMUDA" value="MUDA"> MUDA
                                                            </label>
                                                        </div>

                                                        <div class="form-group">
                                                            <textarea class="form-control mb10" name="activity_desc" id="activityDesc" value="@Model.ActivityDesc"></textarea>
                                                        </div>



                                                        <div class="form-group" id="checkboxform1">
                                                            <!-- <label> -->
                                                            <label class="d-block">Benefit Area <span class="mandatory">*</span></label>

                                                            <label class="tab tabcheckbox" data-toggle="popover" data-trigger="hover" data-placement="top" data-html="true" data-content='<img src="/assets/img/tooltip-imgs/benifitarea.png" height="50" />' title="Benefit Area [Example]">
                                                                <input type="checkbox" value="P" id="iP" class="tab-input">
                                                                <div class="tab-box">P</div>
                                                            </label>

                                                            <label class="tab tabcheckbox" data-toggle="popover" data-trigger="hover" data-placement="top" data-html="true" data-content='<img src="/assets/img/tooltip-imgs/benifitarea.png" height="50" />' title="Benefit Area [Example]">
                                                                <input type="checkbox" value="Q" id="iQ"class="tab-input">
                                                                <div class="tab-box">Q</div>
                                                            </label>

                                                            <label class="tab tabcheckbox" data-toggle="popover" data-trigger="hover" data-placement="top" data-html="true" data-content='<img src="/assets/img/tooltip-imgs/benifitarea.png" height="50" />' title="Benefit Area [Example]">
                                                                <input type="checkbox" value="D" id="iD"class="tab-input">
                                                                <div class="tab-box">D</div>
                                                            </label>

                                                            <label class="tab tabcheckbox" data-toggle="popover" data-trigger="hover" data-placement="top" data-html="true" data-content='<img src="/assets/img/tooltip-imgs/benifitarea.png" height="50" />' title="Benefit Area [Example]">
                                                                <input type="checkbox" value="S" id="iS" class="tab-input">
                                                                <div class="tab-box">S</div>
                                                            </label>

                                                            <label class="tab tabcheckbox" data-toggle="popover" data-trigger="hover" data-placement="top" data-html="true" data-content='<img src="/assets/img/tooltip-imgs/benifitarea.png" height="50" />' title="Benefit Area [Example]">
                                                                <input type="checkbox" value="M" id="iM" class="tab-input">
                                                                <div class="tab-box">M</div>
                                                            </label>

                                                            <label class="tab tabcheckbox " data-toggle="popover" data-trigger="hover" data-placement="top" data-html="true" data-content='<img src="/assets/img/tooltip-imgs/benifitarea.png" height="50" />' title="Benefit Area [Example]">
                                                                <input type="checkbox" value="E" id="iE"class="tab-input">
                                                                <div class="tab-box">E</div>
                                                            </label>
                                                            <!-- </label> -->
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                                <!-- end2nd -->
                                <!--3rd-->
                                <div class="col-lg-5">
                                    <div class="carddashed">
                                        <div class="card-body">

                                            <div class="right-box-padding">
                                                <div class="read-content">

                                                    <div class="card-body">

                                                        <div class="row">
                                                            <div class="col-sm-6">
                                                                <div class="form-group">
                                                                    <label>Doc No <span class="mandatory">*</span></label>
                                                                    <input type="text" name="docNo" id="docNo" class="form-control mb10" value="@Model.DocNo">
                                                                </div>
                                                            </div>

                                                            <div class="col-sm-6">
                                                                <div class="form-group">
                                                                    <label>Version No/Date<span class="mandatory">*</span></label>
                                                                    <input type="text" name="versionNo" id="versionNo" class="form-control mb10" value= "01/ @Model.OriginatedDate">
                                                                   <input type="text" name="Id" id="kaizenIDD" class="form-control mb10" hidden >
                                                                   @*  <input type="hidden" id="loginIDuser" name="loginIDuser" value="@Accessor.HttpContext.Session.GetString("UserID")">  *@
                                                                    <input type="hidden" id="Userrole" data-role="@Accessor.HttpContext.Session.GetString("Userrole")">

                                                                </div>
                                                            </div>

                                                            <div class="col-sm-6">
                                                                <div class="form-group">
                                                                    <label>Cost Centre<span class="mandatory">*</span></label>
                                                                    <input type="text" required="" name="codeCentre" id="codeCentre" class="form-control mb10 " value="@Model.CostCentre" data-toggle="popover" data-trigger="hover" data-placement="top" data-html="true" data-content='<p class="mt-1 text-center">00C</p>' title="Cost Centre [Example]">
                                                                </div>
                                                            </div>

                                                            <div class="col-sm-6">
                                                                <div class="form-group">
                                                                    <label>KAIZEN Ref.No<span class="mandatory">*</span></label>
                                                                    <input type="text" required="" name="refNo" id="refNo" class="form-control " value="@Model.KaizenRefNo" data-toggle="popover" data-trigger="hover" data-placement="top" data-html="true" data-content='<p class="mt-1 text-center">IM/PP/05</p>' title="KAIZEN Ref.No [Example]">
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                                <!--3rdend-->
                            </div>
                            <!-- End Row -->
                        </div>
                        @* table2 *@
                        <div class="col-lg-12">
                            <div class="carddashed">
                                <div class="right-box-padding">
                                    <div class="read-content">

                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col-sm-6">
                                                    <div class="form-group">
                                                        <label>Block<span class="mandatory">*</span></label> <br>
                                                        <div class="dropdown bootstrap-select ">
                                                            @* <select class="form-control selectized" name="plantname" id="plantname" required="" tabindex="-1">
                                                                <option value="" selected="selected">Select</option>
                                                                <!-- Add options here -->
                                                                <option value="option1">Option 1</option>
                                                                <option value="option2">Option 2</option>
                                                                <option value="option3">Option 3</option>
                                                            </select> *@

                                                            <select id="BlockName" class="form-control txt-width" name="UserType">
                                                                <option selected>Select</option>
                                                                @if (Model.BlockList != null)
                                                                {
                                                                    foreach (var modellist in Model.BlockList)
                                                                    {
                                                                        <option value="@modellist.Id">@modellist.BlockName</option>
                                                                    }
                                                                }
                                                            </select>
                                                            <span id="BlockError" class="text-danger error-message"></span>

                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-sm-6">
                                                    <div class="form-group">
                                                        <label>Kaizen Theme <span class="mandatory">*</span></label>
                                                        <input type="text" name="ktheme" id="ktheme" required="" class="form-control" value="@Model.KaizenTheme" data-toggle="popover" data-trigger="hover" data-placement="top" data-html="true" data-content='<p class="mt-1 text-center">Poka yoke in Rail placing</p>' title=" Kaizen Theme [Example] ">
                                                        <span id="themeError" class="text-danger error-message"></span>

                                                    </div>
                                                </div>


                                                <div class="col-sm-6">
                                                    <div class="form-group">
                                                        <label>Block/Line/Machine/Others <span class="mandatory">*</span></label>
                                                        <input type="text" name="teplplant" id="teplplant" required="" class="form-control" value="" data-toggle="popover" data-trigger="hover" data-placement="top" data-html="true" data-content='<p class="mt-1 text-center">IM 01 Process</p>' title="Block/Line/Machine/Others [Example]">
                                                        <span id="plantError" class="text-danger error-message"></span>
                                                    </div>
                                                </div>




                                                <div class="col-sm-6">
                                                    <div class="form-group">
                                                        <label>Suggested Kaizen ( Logical Correlation with root cause) <span class="mandatory">*</span></label>
                                                        <input type="text" required="" name="suggestedKaizen" id="suggestedKaizen" class="form-control" value="@Model.SuggestedKaizen" data-toggle="popover" data-trigger="hover" data-placement="top" data-html="true" data-content='<p class="mt-1 text-center">Provide stopper pin in Heating Fixture</p>' title="Suggested Kaizen [Example]">
                                                        <span id="suggestedKaizenError" class="text-danger error-message"></span>
                                                    </div>
                                                </div>
                                            </div>
                                            <!--row-->

                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                        @* endtable2 *@
                        @* table3 *@
                        <div class="col-lg-12">
                            <div class="carddashed">
                                <!-- <div class="card-body"> -->

                                <div class="right-box-padding">
                                    <div class="read-content">

                                        <div class="card-body">

                                            <div class="row">
                                                <div class="col-sm-6">
                                                    <div class="form-group">
                                                        <label>Problem Statement<span class="mandatory">*</span></label> <br>
                                                        <textarea class="textarea50" name="probstmt" id="probstmt" value="@Model.ProblemStatement" data-toggle="popover" data-trigger="hover" data-placement="top" data-html="true" data-content='<p class="mt-1 text-center justify-content-center">There is no POKA YOKE for Rail placing in Heating Fixture, due to this rail can place wrong direction and it possible for Mold damage and it affect part qualitity.</p>' title="Problem Statement [Example]"></textarea>
                                                        <span id="probstmtError" class="text-danger error-message"></span>
                                                    </div>
                                                </div>

                                                <div class="col-sm-6">
                                                    <div class="form-group">
                                                        <label>Counter measure( Engineering solution)<span class="mandatory">*</span></label> <br>
                                                        <textarea class="textarea50" name="countmeasur" id="countmeasur" value="@Model.CounterMeasure" data-toggle="popover" data-trigger="hover" data-placement="top" data-html="true" data-content='<p class="mt-1 text-center justify-content-center">Locating guide pin placed in fixture 3 places to avoid rail placing wrong orientation</p>' title="Counter measure [Example]"></textarea>
                                                        <span id="countmeasurError" class="text-danger error-message"></span>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>

                                    </div>
                                </div>
                            </div>

                        </div>
                        @* Endtable3 *@
                    </div>

                </div>

            </div>

            <!-- End Accordion Item 1 -->
            <!-- Accordion item 2 -- start -->

            <div>

                <input class="ac-input" id="ac-2" name="accordion-1" type="checkbox" checked />
                <label class="ac-label" for="ac-2">Kaizen Image Details<i></i></label>
                <div class="article ac-content">
                    <div class="col-lg-12">
                        <div class="carddashed mt-2">
                            <div class="card-body">
                                <div class="right-box-padding">
                                    <div class="read-content">

                                        <div class="card-body">

                                            <div class="row">
                                                <div class="col-sm-6">
                                                    <div class="form-group">
                                                        <label>BEFORE<span class="mandatory">*</span></label> <br>
                                                        <div class="inpfilelabel" data-toggle="popover" data-trigger="hover" data-placement="top" data-html="true" data-content='<img src="/assets/img/tooltip-imgs/before-img.jpg" height="170" />' title="BEFORE [Example]">
                                                            <input id="attach_file_before" type="file" name="files" style="display: none;" onchange="previewImage(event, 'uploaded_before_image')">
                                                            <label for="attach_file_before" class="file-drag">
                                                                <div class="row upload-interface">
                                                                    <div class="col-sm-12">
                                                                        <img id="file-image-before" src="~/assets/img/file-upload-icon.png" alt="Preview" class="hidden mb-2">
                                                                        
                                                                        <div class="attachtitle">Click here to attach files</div>
                                                                    </div>
                                                                </div>
                                                            </label>
                                                            <span class="uploaded_image" id="uploaded_before_image"></span>
                                                        </div>
                                                        <span class="responsemessage_img_before"></span>
                                                    </div>
                                                </div>
                                                <div class="col-sm-6">
                                                    <div class="form-group">
                                                        <label>AFTER<span class="mandatory">*</span></label> <br>
                                                        <div class="inpfilelabel" data-toggle="popover" data-trigger="hover" data-placement="top" data-html="true" data-content='<img src="/assets/img/tooltip-imgs/after-img.jpg" height="170" />' title="AFTER [Example]">
                                                            <input id="attach_file_after" type="file" name="files_a" style="display: none;" onchange="previewImage(event, 'uploaded_after_image')">
                                                            <label for="attach_file_after" class="file-drag">
                                                                <div class="row upload-interface">
                                                                    <div class="col-sm-12">
                                                                        <img id="file-image-after" src="~/assets/img/file-upload-icon.png" alt="Preview" class="hidden mb-2">
                                                                        <div class="attachtitle">Click here to attach files</div>
                                                                    </div>
                                                                </div>
                                                            </label>
                                                            <span class="uploaded_image" id="uploaded_after_image"></span>
                                                        </div>
                                                        <span class="responsemessage_img_after"></span>
                                                    </div>
                                                </div>
                                            </div><!-- row -->

                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                    @* //2nd *@
                    <div class="col-lg-12">
                        <div class="carddashed" id="carddash">
                            <div class="row mt-4" id="preview_area">
                                <div class="col-md-3 col-sm-4 ">
                                    <label class="mt-2">Add Additional Attachments</label> <br>
                                    <div class="inpfilelabel-attm mb-2 grayed-out" id="upload_area">
                                        <input id="additional_attachments" type="file" name="files" style="display: none;" multiple onchange="previewAdditionalImages(event)">
                                        <label for="additional_attachments" class="file-drag">
                                            <div class="upload-interface ">
                                                <img id="file-image-additional" src="~/assets/img/file-upload-icon.png" alt="Preview" class="hidden mb-2">
                                                <div class="attachtitle mt-2">Click here to attach files</div>
                                            </div>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- accordion item 2 -- end -->

                </div>


            </div>

            <!-- End Accordion Section -->
            <!--startAccordin-3-->
            <div>
                <input class="ac-input" id="ac-3" name="accordion-1" type="checkbox" checked />
                <label class="ac-label" for="ac-3">Kaizen Member Details<i></i></label>
                <div class="article ac-content">
                    <div class="col-lg-12">
                        <div class="row">
                            @* <div class="col-sm-6"> *@
                            <div class="col-sm-12 col-lg-12">
                                <div class="carddashed mt-2">
                                    <div class="card-body">
                                        <div class="right-box-padding">
                                            <div class="read-content">
                                                <div class="card-body">
                                                    <div class="row">
                                                        <span class="col-sm-12">SAVINGS </span>
                                                        <hr style="border-top: 1px solid grey; width: 100%;">
                                                        <div class="col-sm-4 mt-3">
                                                            <div class="form-group">
                                                                <label>Yield <span class="mandatory">*</span></label>
                                                                <input type="text" name="yield1" id="yield1" value="@Model.Yield" required class="form-control" value="" title="">
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-4 mt-3">
                                                            <div class="form-group">
                                                                <label>Cycle Time <span class="mandatory">*</span></label>
                                                                <input type="text" name="cycletime1" id="cycletime1" required class="form-control" value="">
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-4 mt-3">
                                                            <div class="form-group">
                                                                <label>Cost <span class="mandatory">*</span></label>
                                                                <input type="text" name="cost1" id="cost1" required class="form-control" value="" data-toggle="popover" data-trigger="hover" data-placement="top" data-html="true" data-content='<p class="mt-1 text-center">Rs 388186 / IM01 mold ( 13 IM1 molds for PP+BMB1 + BMB2)</p>' title="Cost [Example]">
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <!-- 2nd row -->
                                                    <div class="row">
                                                        <div class="col-sm-4">
                                                            <div class="form-group">
                                                                <label>Man power <span class="mandatory">*</span></label>
                                                                <input type="text" name="Man power" id="Manpower" required class="form-control" value="@Model.ManPower" value="" title="">
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-4">
                                                            <div class="form-group">
                                                                <label>Consumables <span class="mandatory">*</span></label>
                                                                <input type="text" name="Consumables" id="Consumables" value="@Model.Consumables" required class="form-control" value="">
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-4">
                                                            <div class="form-group">
                                                                <label>Others <span class="mandatory">*</span></label>
                                                                <input type="text" name="Others" id="Others" required class="form-control" value="@Model.Others" title="">
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <!-- end 2nd row -->
                                                    <!-- 3rd row -->
                                                    <div class="row">
                                                        <div class="col-sm-4">
                                                            <div class="form-group">
                                                                <label>Total Savings <span class="mandatory">*</span></label>
                                                                <input type="text" name="TotalSavings" id="TotalSavings" required class="form-control" value="@Model.TotalSavings" data-toggle="popover" data-trigger="hover" data-placement="top" data-html="true" data-content='<p class="mt-1 text-center">5046418</p>' title="Total Savings [Example]">
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-4">
                                                            <div class="form-group">
                                                                <label>Approved by (IE) <span class="mandatory">*</span></label>
                                                                <input type="text" name="approvedbyIE" id="approvedbyIE" required class="form-control" value="@Model.IEEmail" readonly>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-4">
                                                            <div class="form-group">
                                                                <label>Approved by (Accounts)<span class="mandatory">*</span></label>
                                                                <input type="text" name="approvedbyAccount" id="approvedbyAccount" required class="form-control" value="@Model.AccountEmail" readonly>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <!-- end 3rd row -->
                                                    <!-- 4th row -->
                                                   @*  <div class="row">
                                                        <div class="col-sm-8">
                                                            <div class="form-group">
                                                                <label>Approved by (Accounts)<span class="mandatory">*</span></label>
                                                                <input type="text" name="approvedbyAccount" id="approvedbyAccount"  required class="form-control" value="@Model.AccountEmail">
                                                            </div>
                                                        </div>
                                                    </div> *@
                                                    <!-- end 4th row -->
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            @* 2ndsection *@

                            <div class="col-sm-12 col-lg-12">

                                <div class="carddashed mt-2">

                                    <div class="card-body">

                                        <div class="table-responsive">

                                            <table class="table table-bordered mb10" id="idAddteammember">
                                                <thead>
                                                    <tr>
                                                        <th class="text-center">EMP ID</th>
                                                        <th class="text-center">Team Member Name</th>
                                                        <th class="text-center">Function</th>
                                                        <th class="text-center">Action</th>
                                                        
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td class="border-0 text-left"><input type="text" class="form-control mx-0 " id="IdMemberAdd"></td>
                                                        <td class="border-0 text-left"><input type="text" class="form-control ml-1  " id="IdTeamMemberName"> </td>
                                                        <td class="border-0 text-left"><input type="text" class="form-control ml-2 " id="IdFunction"></td>
                                                        <td class="hidden-cell" style="display: none;"id="empGuid"></td>
                                                        <td class=" border-0 px-0" style="width:150px">
                                                         
                                                            <button id="teamAddBtn" class="btn btn-azure ml-3 mb-3 px-4">
                                                                <img src="~/assets/img/mingcute--add-line.png" />
                                                            </button>
                                                           
                                                            <button id="teamDelBtn" class="btn btn-danger ml-2 mb-3">
                                                                <img src="~/assets/img/tabler--trash.png" />
                                                            </button>
                                                        </td> 
                                                    </tr>

                                                </tbody>

                                            </table>

                                            <div class="table-container">
                                            <table id="tblteammemberResult" class="col-lg-10" >
                                                <tbody>
                                                        <tr>
                                                        </tr>
                                                </tbody>


                                            </table>
                                            </div>

                                        </div>

                                    </div>

                                </div>

                            </div>

                            @* endsection *@
                        </div>
                    </div>
                    @* <col-12Ended> *@
                    @* step2start *@
                    <div class="col-lg-12">
                        <div class="carddashed mt-2">
                            <div class="card-body">
                                <div class="right-box-padding">
                                    <div class="read-content">

                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col-md-4">
                                                    <div class="form-group">
                                                        <label>Root Cause (Problem Phenomena)<span class="mandatory">*</span></label>
                                                        <br>
@*                                                         <label>Type:</label>
                                                        <input type="type" name="name" value="" class="form-control" placeholder="select" /> *@


                                                        <select class="form-select" id="multiple-select-field" @* value="@Model.RootCause" *@ data-placeholder="Select" multiple>
                                                            <option>4W1H</option>
                                                            <option>Fishbone Diag</option>
                                                            <option>Others</option>
                                                            <option>Pareto chart</option>
                                                            <option>Scatter Plot Diag</option>
                                                        </select>
                                                    </div>
                                                    <div class="form-group">
                                                        <label>Attachment</label>
                                                        <br>
                                                        <div class="inpfilelabel addattachfile mb-3" title="Attachment [Example]">
                                                            <input id="attach_file2" type="file" name="files" style="display: none;" onchange="previewImage(event, 'uploaded_attach2_image')">
                                                            <label for="attach_file2" class="file-drag">
                                                                <div class="row upload-interface">
                                                                    <div class="col-sm-12">
                                                                        <img id="file-image" src="~/assets/img/file-upload-icon.png" alt="Preview" class="hidden mb-2">
                                                                        <div class="attachtitle">Click here to attach files</div>
                                                                    </div>
                                                                </div>
                                                            </label>
                                                            <span class="uploaded_imagesmall" id="uploaded_attach2_image"></span>
                                                        </div>
                                                        <span class="responsemessage_img_attach"></span>
                                                    </div>

                                                    <div class="form-group">
                                                        <label>Root Cause Explanation</label>
                                                        <br>
                                                        <textarea class="form-control" name="prob_stmt" data-toggle="popover" id="rootcauseDetails" value="@Model.RootCauseDetails" data-trigger="hover" data-placement="top" data-html="true" data-content='<p class="mt-1 text-center">There is no POKA YOKE for Rail placing in Heating Fixture, due to this rail can place wrong direction and it possible for Mold damage and it affect part qualitity.</p>' title="Root Cause Explanation [Example]"></textarea>
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="form-group">
                                                        <label>Brief explanation of present conditions<span class="mandatory">*</span></label>
                                                        <br>
                                                        <textarea class="textarea331" name="present_conditions" id="presentCondition" value="@Model.PresentCondition" data-toggle="popover" data-trigger="hover" data-placement="top" data-html="true" data-content='<p class="mt-1 text-center">There is no poka-yoke/ provision available in  Preheating Fixture.So, even if the rail orientation is changed during the placement by operator, it cant be easily noticed and potentially the rails would be placed in a mold with wrong orientation whci shall cause mold damage as well as defect part.</p>' title="Brief explanation [Example]"></textarea>
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="form-group">
                                                        <label>Brief explanation of Improvements done<span class="mandatory">*</span></label>
                                                        <br>
                                                        <textarea class="textarea331" name="improvements_done" id="improvementsCompleted" value="@Model.ImprovementsCompleted" data-toggle="popover" data-trigger="hover" data-placement="top" data-html="true" data-content='<p class="mt-1 text-center">"This Poka Yoke improvement (stopper pin) is used to improve the rail locating guidance to avoid wrong direction placing.      Locator pin has been placed in fixture for bottom rail, left rail & right rail toavoid direction wrong loading and Mold damage as well as correction time saved.After implementing a poka yoke, operator cant able to place a rail in wrong orientation.
                                             This problem will be permanently eliminated.POKA YOKE Pin made in Inhouse with tool room mfg support."</p>' title="Brief explanation [Example]"></textarea>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    @*
                    </div> *@



                    @* endpagedivs *@
                </div>
            </div>
            <!--EndAccordin-3-->
            <!--StartAccordin-4-->
            <div>

                <input class="ac-input" id="ac-4" name="accordion-2" type="checkbox" checked />
                <label class="ac-label" for="ac-4">
                    Kaizen Horizontal Deployment Details
                    <i></i>
                </label>
                <div class="article ac-content">
                    <form class="mt-2 pl-2">
                        <div class="control-group">
                            <label class="font-weight-bold">Horizontal Deployment</label>
                            <div class="controls">
                                <label class="radio inline">
                                    <input type="radio" name="horizontalDeployment" value="1" id="yesRadio"  />
                                    Yes
                                </label>
                                <label class="radio inline">
                                    <input type="radio" name="horizontalDeployment" value="0" checked id="noRadio"   />
                                    No
                                </label>
                            </div>
                        </div>
                    </form>
                    <div id="toggleContent" style="display: none;">
                    <div class="col-lg-12 col-sm-12"  >
                       
                        <div  class="row ">
                            <div class="col-lg-12"> 


                                <div class="carddashed mt-2">
                                    <div class="card-body">
                                        <div class="right-box-padding">
                                            <div class="read-content">
                                               
                                                <div class="card-body">

                                                    <div class="row">
                                                      
                                                        </div>

                                                    

                                                    <span class="targetGrayed">


                                                        
                                                        <div class="col-sm-12 mt-2">

                                                            <label for="">In Other Machines within the cell</label>

                                                                <input class="form-control" type="text" id="InOtherMC">

                                                        </div>



                                                        <div class="col-sm-12 mt-2">

                                                            <label for="">Within the Department in all the machine groups</label>

                                                                <input class="form-control" type="text" id="withinDept">

                                                        </div>



                                                        <div class="col-sm-12 mt-2">

                                                            <label for="">In Other Dept/ Other Location</label>

                                                                <input class="form-control" type="text" id="InotherDept">

                                                        </div>



                                                        <div class="col-sm-12 mt-2">

                                                            <label for="">Any other Relevant Points</label>

                                                                <input class="form-control" type="text" id="Otherpoints">

                                                        </div>

                                                    </span>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                                </div>
                            

                            @* 2ndsection *@

                            <div class="col-sm-12 col-lg-12">

                                <div class="carddashed mt-2">

                                    <div class="card-body targetGrayed">
                                        <label>
                                            Scope and Plan for Horizontal Deployment
                                        </label>

                                        <div class="table-responsive" id="table2">

                                            <table class="table table-bordered mb10" id="tblDeployment">

                                                <thead>

                                                    <tr>

                                                     
                                                        <th class="text-center">M/C</th>

                                                        <th class="text-center">Target Date</th>

                                                        <th class="text-center">Responsibility</th>

                                                        <th class="text-center">Status</th>

                                                        <th class="text-center">Action</th>

                                                    </tr>

                                                </thead>

                                                <tbody>

                                                    <tr>

                                                      
                                                        <td class="border-0 "><input type="text" class="form-control" id="txtMc"></td>

                                                        <td class="border-0"><input type="date" class="form-control" id="txtTargetDate"></td>

                                                        <td class="border-0 "><input type="text" class="form-control" id="txtResponsibility"></td>

                                                        <td class="border-0 "><input type="text" class="form-control" id="txtStatus"></td>

                                                     
                                                        <td class=" border-0 px-0" style="width:150px">
                                                          
                                                                <button id="btnAddDeployment" class="btn btn-azure ml-3 mb-3 px-4">
                                                                    <img src="~/assets/img/mingcute--add-line.png" />
                                                                </button>

                                                                <button id="btnDeleteDeployment" class="btn btn-danger ml-2 mb-3">
                                                                    <img src="~/assets/img/tabler--trash.png" />
                                                                </button>
                                                        </td>
                                                    </tr>

                                                </tbody>

                                            </table>
                                                <div class="table-container">
                                            <table id="tblDeploymentrResult" class="col-lg-12">
                                                <tbody>
                                                            <tr>
                                                            </tr>
                                                </tbody>
                                            </table>
                                            </div>

                                        </div>

                                    </div>

                                </div>

                            </div>

                            @* endsection *@


                        </div>
                    </div>
                    </div>

                </div>
            </div>

            <!--EndAccordin-4-->
            <!--StartAccordin-5-->
            <div>

                <input class="ac-input" id="ac-5" name="accordion-2" type="checkbox" checked />
                <label class="ac-label" for="ac-5">Kaizen Approver Details<i></i></label>
                <div class="article ac-content">
                    <div class="col-lg-12">
                        <div class="row">
                            <div class="col-lg-4">
                                <div class="carddashed mt-2">
                                    <div class="card-body">
                                        <div class="right-box-padding">
                                            <div class="read-content">
                                                <div class="form-group ">
                                                    <label>Benefits (P,Q,C,S,D,M,E)<span class="mandatory">*</span></label>
                                                    <textarea class="textarea331" name="present_conditions" id="benefit" value="@Model.BenefitArea" data-toggle="popover" data-trigger="hover" data-placement="top" data-html="true" data-content='<p class="mt-1 text-center">"Q - This poka yoke will make sure the rail orientation is always right.S -
                                                                 This will ensure and prevent mold or part damage and improves mold safety.M- It will increase MTTR & MTBF (as of now no data).
                                                               Since IM1 is citical for further downstream process, this will have direct impact of unplanned downtime (reduction) in downstream process till final assembly."</p>' title="Benefits [Example]"></textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-8">
                                <div class="carddashed mt-2">
                                    <div class="card-body">
                                        <div class="right-box-padding">
                                            <div class="read-content">
                                                <div class="form-group ">
                                                    <table class="table table-bordered" style="height: 50vh;">

                                                        <thead>

                                                            <tr>

                                                                <th class="border-0"></th>

                                                                <th class="border-0">KAIZEN Originated By</th>

                                                                <th class="border-0">KAIZEN Approved By</th>
                                                                <th class="border-0">KAIZEN Confirmed By</th>


                                                            </tr>

                                                        </thead>

                                                        <tbody>

                                                            <tr>

                                                                <td class="text-center align-middle py-5">
                                                                    Name
                                                                </td>

                                                                <td class="align-middle align-items-center justify-content-center col-3">
                                                                    <input type="text" class="mx-auto form-control col-9" id="name" name="name" value="@Model.name">
                                                                    <input type="text" class="mx-auto form-control col-9" id="createdBy" name="createdBy" value="@Model.EmpId" hidden>
                                                                </td>
                                                                <td class="align-items-center d-flex justify-content-center h-100">
                                                                    <select name="DRIApprovedBy" id="driapprovedby" class="form-control col-9">
                                                                        @* <option>321256 - Pankaj Singh</option>  *@
                                                                         @foreach (var manager in managerList)
                                                                        {
                                                                            <option value="@manager.MgrId">@manager.MgrId-@manager.ManagerName</option>
                                                                        }

                                                                    </select>
                                                                </td>
                                                                <td class="align-middle align-items-center justify-content-center col-3">
                                                                    <input type="text" class="mx-auto form-control col-4">
                                                                </td>


                                                            </tr>
                                                            <tr>

                                                                <td class="text-center align-middle py-5">
                                                                    Dept
                                                                </td>

                                                                <td class="align-middle align-items-center justify-content-center col-3">
                                                                    <input type="text" class="mx-auto form-control col-9" id="DomainId" name="DomainId" value="@Model.Domain - @Model.Department" >
                                                                </td>
                                                                <td class="align-items-center d-flex justify-content-center h-100">
                                                                    <input name="DeptId" id="DeptId" class="form-control col-9" value="@Model.Domain - @Model.Department">
                                                                </td>
                                                                <td class="align-middle align-items-center justify-content-center col-3">
                                                                    <input type="text" class="mx-auto form-control col-4">
                                                                </td>

                                                            </tr>
                                                            <tr>

                                                                <td class="text-center align-middle py-5">
                                                                    Date
                                                                </td>

                                                                <td class="align-middle align-items-center justify-content-center col-3">
                                                                    <input class="mx-auto form-control col-9" id="CDeta" name="CDate" value="@Model.OriginatedDate" readonly>
                                                                </td>
                                                                <td class="align-items-center d-flex justify-content-center h-100">
                                                                    <input name="driapproveddate" type="date" id="driapproveddate" class="form-control col-9">
                                                                </td>
                                                                <td class="align-middle align-items-center justify-content-center col-3">
                                                                    <input type="text" class="mx-auto form-control col-4">
                                                                </td>

                                                            </tr>



                                                        </tbody>

                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div> @* rowend *@
                    </div> @* col-12end *@

                    <div class="col-lg-12">
                        <div class="carddashed mt-2">
                            <div class="card-body">
                                <div class="right-box-padding">
                                    <div class="read-content">
                                        <div class="form-group ">
                                            <p>
                                                FORMAT/ Ver,No : TEPL-IE-C-FR-0005/01
                                                Tata Electronics Private Limited
                                            </p>
                                        </div>
                                      
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--EndAccordin-5-->
            @* acordion6 *@
            <div id="approvers">

                <input class="ac-input" id="ac-6" name="accordion-1" type="checkbox" checked />
                <label class="ac-label" for="ac-6">Approvers <i></i></label>
                <div class="article ac-content">
                    <div class="col-lg-12 py-2" >
                    <div class="row">
                            <!-- DRI Card -->
                            <div id="DRIDept" class="col-md-4" style="display: none;">
                                <div class="card carddashed">
                                    <div class="card-header">DRI</div>
                                    <div class="card-body">
                                        <div><strong>Name :</strong> <span id="driName"></span></div>
                                        <div><strong>Email :</strong> <span id="driEmail"></span></div>
                                        <div><strong>Department :</strong><span id="dDom"></span>- <span id="dDept"></span></div>
                                        <div><strong>Status :</strong> <span  id="dristatusid"></span></div>
                                        <div><strong>Rejected Reason :</strong> <span id="driRejectedReason"></span></div>
                                        <div><strong>Approved Date :</strong> <span id="driDateTime"></span></div>
                                    </div>
                                </div>
                            </div>
                            <!-- IE Dept Card -->
                            <div class="col-md-4" id="IEDept" style="display: none;">
                                <div class="card  carddashed">
                                <div class="card-header">IE Dept</div>
                                <div class="card-body">
                                        <div><strong>Name :</strong> <span id="ieName"></span></div>
                                        <div><strong>Email :</strong> <span id="ieEmail"></span></div>
                                        <div><strong>Department :</strong><span id="ieeDom"></span>-<span id="ieeDept"></span></div>
                                        <div><strong>Status :</strong> <span id="iestatusid"></span></div>
                                        <div><strong>Rejected Reason :</strong> <span id="ieRejectedReason"></span></div>
                                        <div><strong>Approved Date :</strong> <span id="ieDateTime"></span></div>
                                </div>
                            </div>
                        </div>
                        <!-- Finance Dept Card -->
                            <div id="FinanceDept" class="col-md-4" style="display: none;">
                                <div class="card carddashed">
                                <div class="card-header">Finance Dept</div>
                                <div class="card-body">
                                        <div><strong>Name :</strong> <span id="finName"></span></div>
                                        <div><strong>Email :</strong> <span id="finEmail"></span></div>
                                        <div><strong>Department :</strong> <span id="finDom"></span>-<span id="finDept"></span></div>
                                        <div><strong>Status :</strong> <span  id="financestatusid"></span></div>
                                        <div><strong>Rejected Reason :</strong> <span id="finRejectedReason"></span></div>
                                        <div><strong>Approved Date :</strong> <span id="finDateTime"></span></div>
                                </div>
                            </div>
                        </div>
                   
                            <!-- Image Sanitization Card -->
                            <div id="ImageApprover" class="col-md-4" style="display: none;">
                                <div class="card carddashed">
                                    <div class="card-header">Image Sanitization</div>
                                    <div class="card-body">
                                        <div><strong>Name :</strong> <span id="imageaprName"></span></div>
                                        <div><strong>Status :</strong> <span  id="imagestatusid"></span></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12" id="Editbtn">
                            <label>Would You Like To Edit Kaizen :</label>
                         
                            <button class="btn btn-warning">Edit </button>
                            
                            </div>
                        <div class="col-sm-12 " id="Aprrovalbtn">
                           
                            <div class="card-body float-left">
                                <div>
                                     <label class="btn btn-success" id="waitingapproval" >Waiting for Your Approval</label>
                                    <label class="btn btn-success" id="waitingimage">Waiting for Image Sanitation</label>
                                </div>
                                <button class="btn btn-primary" id="ApprovButton">Approve</button>
                                <button class="btn btn-danger" data-toggle="modal" data-target=".bd-example-modal-lg">Reject</button>                             
                                <button class="btn btn-warning" id="Aprrovalbtnhold">Hold </button>
                            </div>
                        </div>

                        <div class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
                            <div class="modal-dialog modal-md">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <div class="modal-title">Please Enter the Reason for Rejection</div>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>

                                    <div class="modal-body">
                                        <textarea class="col-lg-12"id="RejectionReason"></textarea>
                                    </div>
                                    <button class="btn btn-danger" id="rejectButton">Reject</button>
                                </div>
                            </div>
                        </div>
                </div>
            </div>
           </div>
        </div>
        @* containerdivs *@
    </div>
</div>

<div class="col-sm-12 ">
    <div class="card-body float-right" id="saveItButton">
        <button class="btn btn-warning" id="btnSaveKaizen" >Save It</button>
        <button class="btn btn-azure" id="btnSubmitKaizen">Submit to DRI</button>
    </div>
</div>
<!-- Styles -->

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.min.css" crossorigin="anonymous" />
<!-- Or for RTL support -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.rtl.min.css" crossorigin="anonymous" />
<!-- Scripts -->
<script src="https://code.jquery.com/jquery-3.5.1.min.js" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js" crossorigin="anonymous"></script>
<script>

    // function generateGUID() {
    //     debugger;
    //     function s4() {
    //         return Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);
    //     }
    //     return s4() + s4() + '-' + s4() + '-' + s4() + '-' + s4() + '-' + s4() + s4() + s4();
    // }
    // function updateGUID() {
    //     let guid = generateGUID();
    //     document.getElementById('kaizenid').value = guid;
    // }
    // window.onload = function () {
    //     updateGUID();
    // }
    $(document).ready(function () {
        var userRole = $('#Userrole').data('role');
        debugger;
        
        function handleButtonClick(enumValue, RejectionReason='') {
            $.ajax({
                url: '/CreateKaizen/getstatus',
                type: 'POST',
                contentType: 'application/json',
                data: JSON.stringify({
                    approvalStatus: enumValue,
                    RejectionReason: RejectionReason,
                    
                }),

                success: function (response) {
                    swal("Status Updated").then(function () {
                        window.location.reload();
                    });

                },
                error: function (error) {
                    swal("some error");
                }
            });
        }
        $('#rejectButton').click(function () {
            debugger;
            let enumValue;
            var RejectionReason = $('#RejectionReason').val();
            
            switch (userRole) {
                case 'IE DEPT':
                    enumValue = 7; // IERejected
                    break;
                case 'FINNACE':
                    enumValue = 9; // FinanceRejected
                    break;
                case 'MANAGER':
                    enumValue = 5; //DriRejected
                    break;
                case 'IMAGE APPROVER':
                    enumValue = 3; // ImageRejected
                    break;
                default:
                    enumValue = 10; // Pending or some default value
                    break;
            }
            handleButtonClick(enumValue, RejectionReason);
        });

        $('#ApprovButton').click(function () {
            debugger;
            let enumValue;
            switch (userRole) {
                case 'IE DEPT':
                    enumValue = 6; // IEApproved
                    break;
                case 'FINNACE':
                    enumValue = 8; // FinanceApproved
                    break;
                case 'MANAGER':
                    enumValue = 4; // ImageApproved
                    break;
                case 'IMAGE APPROVER':
                    enumValue = 2; // ImageApproved
                    break;
                default:
                    enumValue = 0; // Saved or some default value
                    break;
            }
            handleButtonClick(enumValue);
        });

        $('#Aprrovalbtnhold').click(function () {
            let enumValue;
            switch (userRole) {
                case 'IE DEPT':
                    enumValue = 12; // Pending or some specific hold value
                    break;
                case 'FINNACE':
                    enumValue = 13; // Pending or some specific hold value
                    break;
                case 'MANAGER':
                    enumValue = 11; // Pending or some specific hold value
                    break;               
                default:
                    enumValue = 10; // Pending or some default value
                    break;
            }
            handleButtonClick(enumValue);
        });
    });

    window.onload = function () {
        debugger;
        var userRole = $('#Userrole').data('role');

    function showHideDivsByRole(userRole) {
        $('#IEDept').hide();
        $('#FinanceDept').hide();
        $('#DRIDept').hide();
        $('#ImageApprover').hide();
        $('#Aprrovalbtn').hide();
        $('#Editbtn').hide();
            $('#waitingapproval').hide();
            $('#waitingimage').hide();
          
        switch (userRole) {
                case 'IE DEPT':
                    $('#DRIDept').show();
                // $('#IEDept').show();
                $('#Aprrovalbtn').show();
                $('#waitingapproval').show();
                break;
                case 'FINNACE':
                    $('#DRIDept').show();
                $('#IEDept').show();
                // $('#FinanceDept').show();
                $('#Aprrovalbtn').show();
                $('#waitingapproval').show();
                break;
                case 'MANAGER':
               
                // $('#DRIDept').show();
                    $('#ImageApprover').show();
                    $('#Editbtn').show();
                    $('#Aprrovalbtn').show();
                    $('#waitingapproval').show();
                break;
                case 'ADMIN':
                    $('#IEDept').show();
                    $('#FinanceDept').show();
                    $('#DRIDept').show();
                    $('#ImageApprover').show();
                    break;
                case 'IMAGE APPROVER':
                    $('#waitingimage').show();
                    // $('#ImageApprover').show(); 
                    $('#Aprrovalbtn').show();
                $('#Aprrovalbtnhold').hide();
                 break;                        
        }
    }
   
        showHideDivsByRole(userRole);
    }
    document.addEventListener('DOMContentLoaded', function () {
        var approversDiv = document.getElementById('approvers');
        var savebutton = document.getElementById('saveItButton');
        if (approversDiv) {
            var editKaizenData = sessionStorage.getItem('editKaizen');
            if (editKaizenData) {
                approversDiv.style.display = 'block';
                savebutton.style.display = 'none';
            } else {
                approversDiv.style.display = 'none'; 
            }
        }
    });
   
    document.getElementById('yesRadio').addEventListener('change', function () { 
        
        document.getElementById('toggleContent').style.display = 'block';
    });

    document.getElementById('noRadio').addEventListener('change', function () {
        document.getElementById('toggleContent').style.display = 'none';
       
       
    });
    $('#multiple-select-field').select2({
        theme: "bootstrap-5",
        width: $(this).data('width') ? $(this).data('width') : $(this).hasClass('w-100') ? '100%' : 'style',
        placeholder: $(this).data('placeholder'),
        closeOnSelect: false,
    });
    function toggleTableGrayedOut(grayOut) {
        if (grayOut) {
            $('.targetGrayed').addClass('grayed-out');
        } else {
            $('.targetGrayed').removeClass('grayed-out');
        }
    }

    toggleTableGrayedOut($('#N').is(':checked'));
    $('input[type="radio"][name="onnOff"]').change(function () {
        var isChecked = $(this).prop('id') === 'N';
        toggleTableGrayedOut(isChecked);
    });

    jQuery("#IdMemberAdd").blur(function () {
        var EmpId = $('#IdMemberAdd').val();
        $.ajax({
            type: 'POST',
            url: '/CreateKaizen/GetTeamMemberDetails',
            dataType: "json",
            data: {
              EmpId: EmpId
            },
            success: function (result) {
                debugger;
                $("#IdTeamMemberName").val(result.name);
                $("#IdFunction").val(result.domain);
                $("#empGuid").val(result.empguid);
               
            },
            error: function (error) {
                swal('Unable to Find the Team Member Details - Please Check the logs');
                // Handle errors (if needed)
                // console.error('Error:', error);
            }
        });
    });

    $("#cycletime1").change(function () {
        $("#approvedbyIE").removeAttr("disabled");
    });

    $("#cost1").change(function () {
        debugger;
        $("#approvedbyIE").removeAttr("disabled");
        var varlength = $("#cost1").val();

        if (varlength>=100000)
        {
            $("#approvedbyAccount").removeAttr("disabled");
        }

    });


    
    $("#teamAddBtn").click(function () {
        debugger;
        var mytable = document.getElementById("tblteammemberResult");
        var rows = mytable.rows.length;
        if (rows < 7) {
        var r = mytable.insertRow(rows);
        
        var c1 = r.insertCell(0);
        var c2 = r.insertCell(1);
        var c3 = r.insertCell(2);
        var c4 = r.insertCell(3);
        var c5 = r.insertCell(4);
        

        var checkbox = document.createElement("input");
        var empId = document.createElement("input");
        var teamMemberName = document.createElement("input");
        var FunctionName = document.createElement("input");
            var Empguid = document.createElement("input");

        checkbox.type = "checkbox";
        empId.type = "text"; 
        empId.value = $("#IdMemberAdd").val();
            empId.readOnly = true;
        empId.className = "input-width";
        teamMemberName.type = "text";
        teamMemberName.value = $("#IdTeamMemberName").val();
        teamMemberName.className = "input-width";
        teamMemberName.readOnly = true;
        FunctionName.className = "input-width";
        FunctionName.type = "text";
        FunctionName.readOnly = true;
        
        FunctionName.value = $("#IdFunction").val();
        FunctionName.className = "input-width";
         Empguid.type = "hidden";
        Empguid.value = $("#empGuid").val();
        c1.appendChild(checkbox);      
        c2.appendChild(empId);
        c3.appendChild(teamMemberName);
        c4.appendChild(FunctionName);
        c5.appendChild(Empguid);
        //value added for list start
        c2.value = $("#IdMemberAdd").val();
        c3.value = $("#IdTeamMemberName").val();
        c4.value = $("#IdFunction").val();
        c5.value = $("#empGuid").val();
        //value added for list end
        c1.style.width = '5%';
        c2.style.width = '31%';
        c3.style.width = '32%';
        c4.style.width = '32%';
        $("#IdMemberAdd").val("");
        $("#IdTeamMemberName").val("");
        $("#IdFunction").val("");
            $("#empGuid").val("");
      }
      else
      {
            swal("Maximum Of Six Rows Only");
      }

    });

    $("#teamDelBtn").click(function () {

        var mytable = document.getElementById("tblteammemberResult");
        var rows = mytable.rows.length;
        for (var i = rows - 1; i > 0; i--) {
            if (mytable.rows[i].cells[0].children[0].checked) {
                mytable.deleteRow(i);
            }
        }
    });
   
    $("#btnAddDeployment").click(function () {
        
        var mytable = document.getElementById("tblDeploymentrResult");
        var rows = mytable.rows.length;

        if (rows < 7) {
        var r = mytable.insertRow(rows);
        var Ad1= r.insertCell(0);
        var Ad2 = r.insertCell(1);
        var Ad3 = r.insertCell(2);
        var Ad4 = r.insertCell(3);
        var Ad5 = r.insertCell(4);
        


        var checkbox = document.createElement("input");
        var Sno = document.createElement("input");
        var mc = document.createElement("input");
        var targetDate = document.createElement("input");
        var responsibility = document.createElement("input");
        var status = document.createElement("input");


        checkbox.type = "checkbox";
        Sno.type = "text";
        Sno.value = $("#txtNo").val();
        Sno.className = "input-width";
            Sno.readOnly = true;
            mc.type = "text";
        mc.value = $("#txtMc").val();
        mc.className = "input-width";
            mc.readOnly = true;
            targetDate.type = "date";
        targetDate.value = $("#txtTargetDate").val();
        targetDate.className = "input-width";
            targetDate.readOnly = true;
            responsibility.type = "text";
        responsibility.value = $("#txtResponsibility").val();
        responsibility.className = "input-width";
            responsibility.readOnly = true;
        status.type = "text";
        status.value = $("#txtStatus").val();
        status.className = "input-width";
            status.readOnly = true;

            Ad1.appendChild(checkbox);
       
        Ad2.appendChild(mc);
        Ad3.appendChild(targetDate);
        Ad4.appendChild(responsibility);
        Ad5.appendChild(status);

        Ad2.value = $("#txtMc").val();
        Ad3.value = $("#txtTargetDate").val();
        Ad4.value = $("#txtResponsibility").val();
        Ad5.value = $("#txtStatus").val();

        Ad2.className = 'col-cd-2';
        Ad3.className = 'col-cd-4';
        Ad4.className = 'col-cd-3';
        Ad5.className = 'col-cd-3';
      
        $("#txtMc").val("");
        $("#txtTargetDate").val("");
        $("#txtResponsibility").val("");
        $("#txtStatus").val("");
        }
        else{
            swal("Maximum Of Six Rows Only");
        }
    });

    $("#btnDeleteDeployment").click(function () {

        var mytable = document.getElementById("tblDeploymentrResult");
        var rows = mytable.rows.length;
        for (var i = rows - 1; i > 0; i--) {
            if (mytable.rows[i].cells[0].children[0].checked) {
                mytable.deleteRow(i);
            }
        }
    });

    function ValidateForm() {
        var isValid = true;
        // Remove red borders and error messages
        $("#BlockName").css("border-color", "red");
        $("#Blockerror").text("");
        $(".error-message").text("");

        $("#ktheme").css("border-color", "red");
        $("#themeError").text("");
        $(".error-message").text("");

        $("#teplplant").css("border-color", "red");
        $("#teplplantError").text("");
        $(".error-message").text("");

        $("#suggestedKaizen").css("border-color", "red");
        $("#suggestedKaizenError").text("");
        $(".error-message").text("");

        $("#probstmt").css("border-color", "red");
        $("#probstmtError").text("");
        $(".error-message").text("");

        
        $("#countmeasur").css("border-color", "red");
        $("#countmeasurError").text("");
        $(".error-message").text("");


        
        // Check for empty or invalid fields
        var blockNameValue = $("#BlockName").val();
        var themeName = $("#ktheme").val();
        var plantName = $("#teplplant").val();
        var suggestedKaizenName = $("#suggestedKaizen").val();
        var problemName = $("#probstmt").val();
        var counterMeasuremName = $("#countmeasur").val();
        var docNo = $("#docNo").val();
        var versionNo = $("#versionNo").val();
        var codeCentre = $("#codeCentre").val();
        var refNo = $("#refNo").val();
        var Yield = $("#yield1").val();
        var CycleTime = $("#cycletime1").val();
        var Cost = $("#cost1").val();
        if (blockNameValue === "--Select--") {
            debugger;
            $("#BlockName").css("border-color", "red");
            $("#BlockError").text("Please Select Domain");
            isValid = false;
        }

        if (themeName === "") {
            debugger;
            $("#ktheme").css("border-color", "red");
            $("#themeError").text("Theme Name is required.");
            isValid = false;
        }
        if (plantName === "") {
            debugger;
            $("#teplplant").css("border-color", "red");
            $("#plantError").text("Block/Line/Machine/Others [Example] is required.");
            isValid = false;
        }

        if (suggestedKaizenName === "") {
            debugger;
            $("#suggestedKaizen").css("border-color", "red");
            $("#suggestedKaizenError").text("Theme Sggested Kaizen Name is required.");
            isValid = false;
        }

        if (problemName === "") {
            debugger;
            $("#probstmt").css("border-color", "red");
            $("#probstmtError").text("Theme Problem Statement  is required.");
            isValid = false;
        }
        if (counterMeasuremName === "") {
            debugger;
            $("#countmeasur").css("border-color", "red");
            $("#countmeasurError").text("Theme Counter Measure  is required.");
            isValid = false;
        }
        return isValid;
    }
    

    $(document).ready(function () {

        // Initialize all popovers
        $('[data-toggle="popover"]').popover();
        $("#approvedbyIE").attr("disabled", "disabled");
        $("#approvedbyAccount").attr("disabled", "disabled");
        $("#btnSaveKaizen").click(function () {
            debugger;
            var checkboxData = {};
            var checkboxData1 = {};
            var Rootcausedata;
            var activityValue = [];
                    $('#checkboxform input[type=checkbox]:checked').each(function () {
                        activityValue.push($(this).val());
                    });

            var benifitarea = [];
                    $('#checkboxform1 input[type=checkbox]:checked').each(function () {
                        benifitarea.push($(this).val());
                    });

                var selectData1 = { "selected": [] };
                $('#multiple-select-field option:selected').each(function () {
                    selectData1["selected"].push($(this).val());
                Rootcausedata = selectData1["selected"].join(',');
                });

            var addedTeamMembers = new Array();
            var addedDeployment = new Array();
            $('#tblteammemberResult tbody tr').each(function () {
                // debugger;
                var row = $(this);
                var memberDetails = {};
                 if (row.find("TD").eq(2).val() != undefined) {
                memberDetails.EmpId = row.find("TD").eq(4).val();
                memberDetails.TeamMemberName = row.find("TD").eq(2).val();
                memberDetails.FunctionName = row.find("TD").eq(3).val();
                    // memberDetails.createdby = Accessor.HttpContext.Session.GetString("UserID");
                    // memberDetails.createdBy = row.find("TD").eq(4).val();
                    // memberDetails.createdBy = $("#loginIDuser").val();
                    // memberDetails.CreatedDate = $("#CDeta").val();
                   
                    // memberDetails.KaizenID = $("#kaizenid").val();
                    addedTeamMembers.push(memberDetails);
               }
               
               
            });

            $('#tblDeploymentrResult tbody tr').each(function () {
                var row = $(this);
                var deploymentDetails = {};
                if (row.find("TD").eq(1).val() != undefined) {
                    deploymentDetails.MC = row.find("TD").eq(1).val();
                    deploymentDetails.TargetDate = row.find("TD").eq(2).val();
                    deploymentDetails.Responsibility = row.find("TD").eq(3).val();
                    deploymentDetails.ScopeStatus = row.find("TD").eq(4).val();
                    // deploymentDetails.createdBy = $("#loginIDuser").val();
                    deploymentDetails.CreatedDate = $("#CDeta").val();
                    // deploymentDetails.KaizenID = $("#kaizenid").val();
                    addedDeployment.push(deploymentDetails);
                }
            });

            // var memberListJson = JSON.stringify(addedTeamMembers);
            // var deploymentListJson = JSON.stringify(addedDeployment);


            // Create FormData object
            var formData = new FormData();

           
            
            // Append text and file fields to formData

           
            formData.append('Block', $('#BlockName').val());
            formData.append('BlockDetails', $('#BlockName option:selected').text());
            formData.append('Activity', activityValue);
            formData.append('BenefitArea', benifitarea);
            formData.append('ActivityDesc', $('#activityDesc').val());
            formData.append('KaizenTheme', $('#ktheme').val());
            formData.append('plantName', $('#teplplant').val());
            formData.append('SuggestedKaizen', $('#suggestedKaizen').val());
            formData.append('ProblemStatement', $('#probstmt').val());
            formData.append('CounterMeasure', $('#countmeasur').val());
            formData.append('DocNo', $("#docNo").val());
            formData.append('VersionNoDate', $("#versionNo").val());
            formData.append('CostCentre', $("#codeCentre").val());
            formData.append('KaizenRefNo', $("#refNo").val());
            formData.append('Yield', $("#yield1").val());
            formData.append('CycleTime', $("#cycletime1").val());
            formData.append('Cost', $("#cost1").val());
            formData.append('ManPower', $("#Manpower").val());
            formData.append('Consumables', $("#Consumables").val());
            formData.append('Others', $("#Others").val());
            formData.append('TotalSavings', $("#TotalSavings").val());
            formData.append('ApprovedByIE', $("#approvedbyIE").val());
            formData.append('FinanceApprovedBy', $("#approvedbyAccount").val());
            formData.append('Rootcause', Rootcausedata);
            formData.append('MemberList', JSON.stringify(addedTeamMembers));
            formData.append('DeploymentList', JSON.stringify(addedDeployment));
            formData.append('RootCauseDetails', $("#rootcauseDetails").val());
            formData.append('PresentCondition', $("#presentCondition").val());
            formData.append('ImprovementsCompleted', $("#improvementsCompleted").val());
            formData.append('HorozantalDeployment', $('input[name="horizontalDeployment"]:checked').val());
            formData.append('InOtherMC', $('#InOtherMC').val());
            formData.append('WithIntheDept', $('#withinDept').val());
            formData.append('InotherDept', $('#InotherDept').val());
            formData.append('Otherpoints', $('#Otherpoints').val());
            formData.append('DRIApprovedBy', $('#driapprovedby').val());
            formData.append('DRIApprovedDate', $('#driapproveddate').val());
            formData.append('Benifits', $("#benefit").val());
            formData.append('OriginatedBy', $("#name").val());
            formData.append('Domain', $("#DomainId").val());
            formData.append('Department', $("#DeptId").val());
            formData.append('CreatedDate', $("#CDeta").val());
            formData.append('AttachmentBefore', $('#attach_file_before')[0].files[0]);
            formData.append('AttachmentAfter', $('#attach_file_after')[0].files[0]);
            formData.append('RootProblemAttachment', $('#attach_file2')[0].files[0]);

            //  additional attachments
            var additionalFiles = document.getElementById('additional_attachments').files;
            for (var i = 0; i < additionalFiles.length; i++) {
                formData.append('AdditionalAttachments', additionalFiles[i]);
            }

            if (!ValidateForm())
            {
                return;
            }
            //  AJAX 
            $.ajax({
                type: 'POST',
                url: '/CreateKaizen/NewKaizen',
                dataType: 'json',
                processData: false,
                contentType: false,
                data: formData,
                success: function (result) {
                    if (result.success) {
                        swal({
                            text: 'Kaizen Saved Successfully!!',
                            type: 'success'
                        }).then(function () {
                            window.location.reload(); 
                        });
                    } else {
                        swal('Unable to Save the Kaizen Details - Please Check the logs');
                    }
                },
                error: function (error) {
                    swal('Unable to Save the Kaizen Details - Please Check the logs');
                    console.error('Error:', error);
                }
            });
            // updateGUID();
        });

        $("#btnSubmitKaizen").click(function () {
       debugger;
       var checkboxData = {};
       var checkboxData1 = {};
       var Rootcausedata;
       var activityValue = [];
       $('#checkboxform input[type=checkbox]:checked').each(function () {
           activityValue.push($(this).val());
       });
       var benifitarea = [];
       $('#checkboxform1 input[type=checkbox]:checked').each(function () {
           benifitarea.push($(this).val());
       });
       var selectData1 = { "selected": [] };
       $('#multiple-select-field option:selected').each(function () {
           selectData1["selected"].push($(this).val());
           Rootcausedata = selectData1["selected"].join(',');
       });
       var addedTeamMembers = new Array();
       var addedDeployment = new Array();
       $('#tblteammemberResult tbody tr').each(function () {
           var row = $(this);
           var memberDetails = {};
           if (row.find("TD").eq(2).val() != undefined) {
               memberDetails.EmpId = row.find("TD").eq(4).val();
               memberDetails.TeamMemberName = row.find("TD").eq(2).val();
               memberDetails.FunctionName = row.find("TD").eq(3).val();
               addedTeamMembers.push(memberDetails);
           }
       });
       $('#tblDeploymentrResult tbody tr').each(function () {
           var row = $(this);
           var deploymentDetails = {};
           if (row.find("TD").eq(1).val() != undefined) {
               deploymentDetails.MC = row.find("TD").eq(1).val();
               deploymentDetails.TargetDate = row.find("TD").eq(2).val();
               deploymentDetails.Responsibility = row.find("TD").eq(3).val();
               deploymentDetails.ScopeStatus = row.find("TD").eq(4).val();
               deploymentDetails.CreatedDate = $("#CDeta").val();
               addedDeployment.push(deploymentDetails);
           }
       });
       // Create FormData object
       var formData = new FormData();
       // Append text and file fields to formData
       formData.append('Block', $('#BlockName').val());
       formData.append('BlockDetails', $('#BlockName option:selected').text());
       formData.append('Activity', activityValue);
       formData.append('BenefitArea', benifitarea);
       formData.append('ActivityDesc', $('#activityDesc').val());
       formData.append('KaizenTheme', $('#ktheme').val());
       formData.append('plantName', $('#teplplant').val());
       formData.append('SuggestedKaizen', $('#suggestedKaizen').val());
       formData.append('ProblemStatement', $('#probstmt').val());
       formData.append('CounterMeasure', $('#countmeasur').val());
       formData.append('DocNo', $("#docNo").val());
       formData.append('VersionNoDate', $("#versionNo").val());
       formData.append('CostCentre', $("#codeCentre").val());
       formData.append('KaizenRefNo', $("#refNo").val());
       formData.append('Yield', $("#yield1").val());
       formData.append('CycleTime', $("#cycletime1").val());
       formData.append('Cost', $("#cost1").val());
       formData.append('ManPower', $("#Manpower").val());
       formData.append('Consumables', $("#Consumables").val());
       formData.append('Others', $("#Others").val());
       formData.append('TotalSavings', $("#TotalSavings").val());
       formData.append('ApprovedByIE', $("#approvedbyIE").val());
       formData.append('FinanceApprovedBy', $("#approvedbyAccount").val());
       formData.append('Rootcause', Rootcausedata);
       formData.append('MemberList', JSON.stringify(addedTeamMembers));
       formData.append('DeploymentList', JSON.stringify(addedDeployment));
       formData.append('RootCauseDetails', $("#rootcauseDetails").val());
       formData.append('PresentCondition', $("#presentCondition").val());
       formData.append('ImprovementsCompleted', $("#improvementsCompleted").val());
       if ($("#yesRadio").is(":checked")) { formData.append('HorozantalDeployment', true); }
       if ($("#noRadio").is(":checked")) { formData.append('HorozantalDeployment', false); }
       formData.append('InOtherMC', $('#InOtherMC').val());
       formData.append('WithIntheDept', $('#withinDept').val());
       formData.append('InotherDept', $('#InotherDept').val());
       formData.append('Otherpoints', $('#Otherpoints').val());
       formData.append('DRIApprovedBy', $('#driapprovedby').val());
       formData.append('DRIApprovedDate', $('#driapproveddate').val());
       formData.append('Benifits', $("#benefit").val());
       formData.append('OriginatedBy', $("#name").val());
       formData.append('Domain', $("#DomainId").val());
       formData.append('Department', $("#DeptId").val());
       formData.append('CreatedDate', $("#CDeta").val());
       formData.append('AttachmentBefore', $('#attach_file_before')[0].files[0]);
       formData.append('AttachmentAfter', $('#attach_file_after')[0].files[0]);
       formData.append('RootProblemAttachment', $('#attach_file2')[0].files[0]);
       //  additional attachments
       var additionalFiles = document.getElementById('additional_attachments').files;
       for (var i = 0; i < additionalFiles.length; i++) {
           formData.append('AdditionalAttachments', additionalFiles[i]);
       }
       if (!ValidateForm()) {
           return;
       }
       $.ajax({
           type: 'POST',
           url: '/CreateKaizen/SubmitKaizen',
           dataType: 'json',
           processData: false,
           contentType: false,
           data: formData,
           success: function (result) {
               if (result.success) {
                   swal({
                       text: 'Kaizen Submitted to DRI Successfully!!',
                       type: 'success'
                   }).then(function () {
                      window.location.reload();
                   });
               } else {
                   swal('Unable to Submit the Kaizen Details - Please Check the logs');
               }
           },
           error: function (error) {
               swal('Unable to Submit the Kaizen Details - Please Check the logs');
               console.error('Error:', error);
           }
       });
   });

    });

</script>

 <script>
    function previewImage(event, targetId) {
        var uploadedImageContainer = $('#' + targetId);
        uploadedImageContainer.empty();

        var file = event.target.files[0];
        var fileName = file.name;
        var isValid = validate_fileupload(fileName);
        if (!isValid) {
            console.log('Invalid file type');
            return;
        }

        var imgElement = $('<img>', {
            src: URL.createObjectURL(event.target.files[0]),
            alt: 'Uploaded Image'
        });

        var deleteButton = $('<div>', {
            class: 'delete-btn',
            text: 'Delete',
            click: function () {
                swal({
                    text: "Are you sure you want to Delete?",
                    buttons: {
                        confirm: "Yes",
                        cancel: "No"
                    }
                }).then((userConfirmation) => {
                    if (userConfirmation) {
                        uploadedImageContainer.empty();
                        $('#' + event.target.id).val(''); 
                        $('#' + targetId).closest('.inpfilelabel').find('.upload-interface').show();
                        $('#' + targetId).closest('.inpfilelabel').css('padding', '30px');
                        $('#' + targetId).closest('.inpfilelabel').css('border', '1px dashed #797A89');
                        $('#upload_area').addClass('grayed-out');
                        img.parentElement.remove();

                    }
                });
            }
        });

        deleteButton.css({
            'margin-left': '10px',
            'margin-top': '5px' 
        });

        uploadedImageContainer.append(imgElement, deleteButton);
        if ($('#attach_file_before').get(0).files.length > 0 && $('#attach_file_after').get(0).files.length > 0) {
            $('#upload_area').removeClass('grayed-out');
        }
        else {
            $('#upload_area').addClass('grayed-out');
        }
        

        if (event.target.files.length > 0) {
            $('#' + targetId).closest('.inpfilelabel').find('.upload-interface').hide();
            $('#' + targetId).closest('.inpfilelabel').css('padding', '4px');
            $('#' + targetId).closest('.delete-btn').css('padding', '2px 5px');
            $('#' + targetId).closest('.inpfilelabel').css('border', 'none');



        }
    }
    function validate_fileupload(fileName) {
        var allowed_extensions = new Array("jpg", "png", "gif");
        var file_extension = fileName.split('.').pop().toLowerCase();

        for (var i = 0; i < allowed_extensions.length; i++) {
            if (allowed_extensions[i] == file_extension) {
                return true; // valid file extension
            }
        }
        swal("Invalid file type" + fileName);
        return false;
    }
//mutli files
     var imgNo = 0;

     function previewAdditionalImages(event) {
        var files = event.target.files;
        var output = document.getElementById('preview_area');
        var uploadArea = document.getElementById('upload_area');
        var allowed_extensions = new Set(["jpg", "jpeg", "png", "gif"]);

        for (var i = 0; i < files.length; i++) {
            var fileName = files[i].name;
            var file_extension = fileName.split('.').pop().toLowerCase();

            if (!allowed_extensions.has(file_extension)) {
                swal("Invalid file type: " + fileName);
                continue;
            }

            var reader = new FileReader();
            reader.onload = function (event) {
                var img = document.createElement("img");
                img.src = event.target.result;
                img.className = "uploadImageSmall";
                img.id = "imageID" + imgNo;
                imgNo = imgNo + 1;
                var deleteBtn = document.createElement("span");
                    deleteBtn.className = "delete-btn delbutt";
                    deleteBtn.textContent = "Delete";
                    deleteBtn.onclick = function () {
                     swal({
                          text: "Are you sure you want to Delete?",
                           buttons: {
                               confirm: "Yes",
                               cancel: "No"
                                    }
                      }).then((userConfirmation) => {
                              if (userConfirmation) {
                            deleteBtn.parentElement.parentElement.remove();
                              }
                              });
                    };

                var div = document.createElement("div");
                div.className = "col-md-3 col-sm-4 ";
                div.innerHTML = `<div class="inpfilelabel-attm mt-2 mb-2 p-2">${img.outerHTML}</div>`;
                div.querySelector('.inpfilelabel-attm').appendChild(deleteBtn);
               
                output.insertBefore(div, uploadArea.parentElement);
            };

            reader.readAsDataURL(files[i]);
        }
    }    
</script>
<script>
    $(function getSession() {
        /* debugger; */

        if (sessionStorage.getItem("editKaizen")) {
            var editKaizen = JSON.parse(sessionStorage.getItem("editKaizen"));
            var KaizenId = editKaizen['kaizenid'];
            $.ajax({
                type: 'GET',
                url: '/CreateKaizen/GetKaizendetailsById',
                dataType: "json",
                data:
                {
                    KaizenId: KaizenId
                },
                success: function (result) {
                    debugger;
                    if (result) {
                        const statusdetails = {
                            ImageApproved: 2,
                            ImageRejected: 3,
                            DRIApproved: 4,
                            DRIRejected: 5,
                            IEApproved: 6,
                            IERejected: 7,
                            FinanceApproved: 8,
                            FinanceRejected: 9,
                            Pending: 10,
                            DRIPending: 11,
                            IEPending: 12,
                            FinancePending: 13
                        };

                        // Reverse lookup to get the status name by its number
                        const reverseStatusDetails = {};
                        for (const [key, value] of Object.entries(statusdetails)) {
                            reverseStatusDetails[value] = key;
                        }

                        var statusDesc = result.kaizenList[0].approvalStatus;

                        if (statusDesc === statusdetails.FinanceApproved || statusDesc === statusdetails.FinanceRejected || statusDesc === statusdetails.FinancePending) {
                            $('#financestatusid').text(reverseStatusDetails[statusDesc]).addClass(statusDesc === statusdetails.FinanceRejected ? 'rejected' : (statusDesc === statusdetails.FinancePending ? 'pending' : 'approved'));
                            if (statusDesc === statusdetails.FinanceRejected) {
                                $("#finRejectedReason").text(result.kaizenList[0].rejectionreason);
                            }
                            $('#iestatusid').text(reverseStatusDetails[statusdetails.IEApproved]).addClass('approved');
                            $('#imagestatusid').text(reverseStatusDetails[statusdetails.ImageApproved]).addClass('approved');
                            $('#dristatusid').text(reverseStatusDetails[statusdetails.DRIApproved]).addClass('approved');
                        } else if (statusDesc === statusdetails.IEApproved || statusDesc === statusdetails.IERejected || statusDesc === statusdetails.IEPending) {
                            $('#iestatusid').text(reverseStatusDetails[statusDesc]).addClass(statusDesc === statusdetails.IERejected ? 'rejected' : (statusDesc === statusdetails.IEPending ? 'pending' : 'approved'));
                            if (statusDesc === statusdetails.IERejected) {
                                $("#ieRejectedReason").text(result.kaizenList[0].rejectionreason);
                            }
                            $('#imagestatusid').text(reverseStatusDetails[statusdetails.ImageApproved]).addClass('approved');
                            $('#dristatusid').text(reverseStatusDetails[statusdetails.DRIApproved]).addClass('approved');
                        } else if (statusDesc === statusdetails.DRIApproved || statusDesc === statusdetails.DRIRejected || statusDesc === statusdetails.DRIPending) {
                            $('#dristatusid').text(reverseStatusDetails[statusDesc]).addClass(statusDesc === statusdetails.DRIRejected ? 'rejected' : (statusDesc === statusdetails.DRIPending ? 'pending' : 'approved'));
                            if (statusDesc === statusdetails.DRIRejected) {
                                $("#driRejectedReason").text(result.kaizenList[0].rejectionreason);
                            }
                            $('#imagestatusid').text(reverseStatusDetails[statusdetails.ImageApproved]).addClass('approved');
                        } else if (statusDesc === statusdetails.ImageApproved || statusDesc === statusdetails.ImageRejected) {
                            $('#imagestatusid').text(reverseStatusDetails[statusDesc]).addClass(statusDesc === statusdetails.ImageRejected ? 'rejected' : 'approved');
                        } else if (statusDesc === statusdetails.Pending || statusDesc === statusdetails.DRIPending || statusDesc === statusdetails.IEPending || statusDesc === statusdetails.FinancePending) {
                            $('#pendingstatusid').text(reverseStatusDetails[statusDesc]).addClass('pending');
                        }
                        $('#ieDateTime').text(result.kaizenList[0].ieApprovedDate);
                        $('#driDateTime').text(result.kaizenList[0].driApprovedDate);
                        $('#finDateTime').text(result.kaizenList[0].financeApprovedDate);
                        $('#statusid').text(result.kaizenList[0].approvalstatusdesc);
                        $('#dDept').text(result.approverslist[0].driDept);
                        $('#driName').text(result.approverslist[0].driName);
                        $('#driEmail').text(result.approverslist[0].driEmail);
                        $('#dDom').text(result.approverslist[0].driDomain);

                        $('#ieeDept').text(result.approverslist[0].ieDept);
                        $('#ieName').text(result.approverslist[0].iEname);
                        $('#ieEmail').text(result.approverslist[0].ieEmail);
                        $('#ieeDom').text(result.approverslist[0].ieDomain);

                        $('#finDept').text(result.approverslist[0].finDept);
                        $('#finName').text(result.approverslist[0].finnaceName );
                        $('#finEmail').text(result.approverslist[0].financeEmail);
                        $('#finDom').text(result.approverslist[0].finDomain);
                      
                        $('#imageaprName').text(result.approverslist[0].imageAproveName);
                        
                        $("#docNo").val(result.kaizenList[0].docNo);
                       

                        $("#versionNo").val(result.kaizenList[0].versionNoDate);
                        $("#refNo").val(result.kaizenList[0].kaizenRefNo);
                        $("#codeCentre").val(result.kaizenList[0].costCentre);
                        var ActivityValue = result.kaizenList[0].activity;
                        var activityname = ActivityValue.split(',');
                        activityname.forEach(function (activityname) {
                            $("#id" + activityname.trim()).prop("checked", true);
                        });
                        $("#activityDesc").val(result.kaizenList[0].activityDesc);
                        var benifitvalue = result.kaizenList[0].benefitArea;
                        var checkboxname = benifitvalue.split(',');
                        checkboxname.forEach(function (checkboxname) {
                            $("#i" + checkboxname.trim()).prop("checked", true);
                        });
                        $('#BlockName option').map(function () {
                            if ($(this).text() == result.kaizenList[0].block) return this;
                        }).attr('selected', 'selected').change();
                        $("#teplplant").val(result.kaizenList[0].blockDetails);
                        $("#ktheme").val(result.kaizenList[0].kaizenTheme);
                        $("#suggestedKaizen").val(result.kaizenList[0].suggestedKaizen);
                        $("#probstmt").val(result.kaizenList[0].problemStatement);
                        $("#countmeasur").val(result.kaizenList[0].counterMeasure);
                        $("#yield1").val(result.kaizenList[0].yield);
                        $("#cycletime1").val(result.kaizenList[0].cycleTime);
                        $("#cost1").val(result.kaizenList[0].cost);
                        $("#Manpower").val(result.kaizenList[0].manPower);
                        $("#Consumables").val(result.kaizenList[0].consumables);
                        $("#Others").val(result.kaizenList[0].others);
                        $("#TotalSavings").val(result.kaizenList[0].totalSavings);
                        var rootCauses = result.kaizenList[0].rootCause.split(',').map(item => item.trim());
                        $('#multiple-select-field option').each(function () {
                            if (rootCauses.includes($(this).text())) {
                                $(this).prop('selected', true);
                            }
                        }).change();
                        $("#presentCondition").val(result.kaizenList[0].presentCondition);
                        $("#improvementsCompleted").val(result.kaizenList[0].improvementsCompleted);
                        $("#rootcauseDetails").val(result.kaizenList[0].rootCauseDetails);
                        $("#benefit").val(result.kaizenList[0].benifits);
                        $("#InOtherMC").val(result.kaizenList[0].inOtherMc);
                        $("#withinDept").val(result.kaizenList[0].withIntheDept);
                        $("#InotherDept").val(result.kaizenList[0].inOtherDept);
                        $("#Otherpoints").val(result.kaizenList[0].otherPoints);
                      

                        var dateStr = result.kaizenList[0].driApprovedDate;
                        var parts = dateStr.split('-');
                        var day = parts[0];
                        var month = parts[1];
                        var year = parts[2];
                        var formattedDate = `${year}-${month}-${day}`;
                        $("#driapproveddate").val(formattedDate);

                        if (result.kaizenList[0].horozantalDeployment === true) {
                            $("#yesRadio").prop("checked", true);
                            document.getElementById('toggleContent').style.display = 'block';
                        } 
                        else if (result.kaizenList[0].horozantalDeployment === false) {
                            $("#noRadio").prop("checked", true);
                            document.getElementById('toggleContent').style.display = 'none';
                        } 
                        $("#CDeta").val(result.kaizenList[0].originatedDate);
                        $("#DeptId").val(result.kaizenList[0].origionatedDept);
                        $("#name").val(result.kaizenList[0].originatedBy);

                        var mytable = document.getElementById("tblteammemberResult");
                        result.teamList.forEach(item => {
                            var rows = mytable.rows.length;
                            var r = mytable.insertRow(rows);

                            var c1 = r.insertCell(0);
                            var c2 = r.insertCell(1);
                            var c3 = r.insertCell(2);
                            var c4 = r.insertCell(3);

                            var checkbox = document.createElement("input");
                            var empId = document.createElement("input");
                            var teamMemberName = document.createElement("input");
                            var functionName = document.createElement("input");

                            checkbox.type = "checkbox";
                            empId.type = "text";
                            empId.value = item.empId; 
                            empId.className = "input-width";
                            teamMemberName.type = "text";
                            teamMemberName.value = item.teamMemberName; 
                            teamMemberName.className = "input-width";
                            functionName.type = "text";
                            functionName.value = item.functionName;
                            functionName.className = "input-width";

                            c1.appendChild(checkbox);
                            c2.appendChild(empId);
                            c3.appendChild(teamMemberName);
                            c4.appendChild(functionName);

                            c1.style.width = '5%';
                            c2.style.width = '31%';
                            c3.style.width = '32%';
                            c4.style.width = '32%';
                        });
                        var mytable = document.getElementById("tblDeploymentrResult");
                        result.scopeList.forEach(item => {
                            var rows = mytable.rows.length;
                            var r = mytable.insertRow(rows);
                            var Ad1 = r.insertCell(0);
                            var Ad2 = r.insertCell(1);
                            var Ad3 = r.insertCell(2);
                            var Ad4 = r.insertCell(3);
                            var Ad5 = r.insertCell(4);

                            var checkbox = document.createElement("input");
                            var Sno = document.createElement("input");
                            var mc = document.createElement("input");
                            var targetDate = document.createElement("input");
                            var responsibility = document.createElement("input");
                            var status = document.createElement("input");

                            checkbox.type = "checkbox";
                            Sno.type = "text";
                            Sno.value = $("#txtNo").val();
                            Sno.className = "input-width";
                            mc.type = "text";
                            mc.value = item.mc; 
                            mc.className = "input-width";
                            targetDate.type = "text";
                            targetDate.value = item.targetFormatDate; 
                            targetDate.className = "input-width";
                            responsibility.type = "text";
                            responsibility.value = item.responsibility;
                            responsibility.className = "input-width";
                            status.type = "text";
                            status.value = item.scopeStatus; 
                            status.className = "input-width";

                            Ad1.appendChild(checkbox);
                            Ad2.appendChild(mc);
                            Ad3.appendChild(targetDate);
                            Ad4.appendChild(responsibility);
                            Ad5.appendChild(status);

                            Ad2.className = 'col-cd-2';
                            Ad3.className = 'col-cd-4';
                            Ad4.className = 'col-cd-3';
                            Ad5.className = 'col-cd-3';
                        });
                        // result.attachmentsList.forEach(item => {
                        //     var fileName = item.fileName;
                        //     var attachmentType = item.attachmentType;
                        //     console.log('Original fileName:', fileName);
                        //     // if (fileName.startsWith('/')) {
                        //     //     fileName = fileName.substring(1);
                        //     // }
                        //     var imgElement = $('<img>', {
                        //         src: fileName,
                        //         alt: 'Image'
                        //     });
                        //     if (attachmentType === "AttachmentBefore") {
                        //         $('#uploaded_before_image').append(imgElement);
                        //     }
                        // });

                    }
                    else 
                    {
                        
                    }
                },
                error: function (error) {
                }
            });       
            sessionStorage.removeItem("editKaizen");
        } 
        else 
        {
            sessionStorage.removeItem("editKaizen");
            
        }
    });
</script>